/*! For license information please see de0a75d9.6489fb06.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[260],{412:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return u})),n.d(t,"metadata",(function(){return s})),n.d(t,"rightToc",(function(){return b})),n.d(t,"default",(function(){return d}));var o=n(1),a=n(9),r=(n(0),n(453)),c=n(462),i=n(452),l=n(457),u=(n(459),{last_modified_on:"2023-03-30",$schema:"/.meta/.schemas/guides.json",title:"How to connect to your EKS cluster with kubectl",description:"How to connect to your EKS cluster using kubectl",author_github:"https://github.com/l0ck3",tags:["type: tutorial","cloud_provider: aws"],hide_pagination:!0}),s={categories:[{name:"tutorial",title:"Tutorial",description:"Simple step-by-step tutorials.",permalink:"/guides/tutorial"}],coverLabel:"How to connect to your EKS cluster with kubectl",description:"How to connect to your EKS cluster using kubectl",permalink:"/guides/tutorial/how-to-connect-to-your-eks-cluster-with-kubectl",readingTime:"5 min read",source:"@site/guides/tutorial/how-to-connect-to-your-eks-cluster-with-kubectl.md",tags:[{label:"type: tutorial",permalink:"/guides/tags/type-tutorial"},{label:"cloud_provider: aws",permalink:"/guides/tags/cloud-provider-aws"}],title:"How to connect to your EKS cluster with kubectl",truncated:!1,prevItem:{title:"How to connect to a managed MongoDB instance on AWS",permalink:"/guides/tutorial/how-to-connect-to-a-managed-mongodb-instance-on-aws"},nextItem:{title:"How to create an RDS instance through the AWS console",permalink:"/guides/tutorial/how-to-create-an-rds-instance-through-aws-console"}},b=[{value:"Goal",id:"goal",children:[]},{value:"Conclusion",id:"conclusion",children:[]}],p={rightToc:b};function d(e){var t=e.components,n=Object(a.a)(e,["components"]);return Object(r.b)("wrapper",Object(o.a)({},p,n,{components:t,mdxType:"MDXLayout"}),Object(r.b)("p",null,"Qovery makes it easy to create an EKS cluster on your AWS account and manage the deployment of applications on it. But you still might want to execute operations on it via ",Object(r.b)("inlineCode",{parentName:"p"},"kubectl")," like you would on any other Kubernetes cluster."),Object(r.b)(l.a,{name:"guide",mdxType:"Assumptions"},Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"You have an existing EKS cluster manages by Qovery"),Object(r.b)("li",{parentName:"ul"},"You have deployed an application on this cluster with Qovery"))),Object(r.b)(i.a,{type:"warning",mdxType:"Alert"},"Be aware that any operation you do manually on your cluster could conflict with Qovery. We would advise to not use this method for anything else than connecting to a container with `kubectl exec`"),Object(r.b)("h2",{id:"goal"},"Goal"),Object(r.b)("p",null,"This tutorial will show you how to access a Qovery managed cluster on AWS with ",Object(r.b)("inlineCode",{parentName:"p"},"kubectl")," and shell into a running application container."),Object(r.b)(c.a,{headingDepth:3,mdxType:"Steps"},Object(r.b)("ol",null,Object(r.b)("li",null,Object(r.b)("h4",{id:"install-and-configure-your-toolchain"},"Install and configure your toolchain"),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"kubectl")),Object(r.b)("p",null,"To interact with your cluster, you will need ",Object(r.b)("inlineCode",{parentName:"p"},"kubectl")," installed.\n",Object(r.b)("a",Object(o.a)({parentName:"p"},{href:"https://kubernetes.io/docs/tasks/tools/"}),"https://kubernetes.io/docs/tasks/tools/")),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"AWS CLI")),Object(r.b)("p",null,"The AWS CLI must be installed and configured on your machine.\n",Object(r.b)("a",Object(o.a)({parentName:"p"},{href:"https://docs.aws.amazon.com/cli/latest/userguide/cli-chap-getting-started.html"}),"https://docs.aws.amazon.com/cli/latest/userguide/cli-chap-getting-started.html"))),Object(r.b)("li",null,Object(r.b)("h4",{id:"add-your-iam-user-to-the-admin-group"},"Add your IAM user to the Admin group"),Object(r.b)("p",null,"Since ",Object(r.b)("inlineCode",{parentName:"p"},"kubectl")," will use IAM to authenticate, you need to add your IAM user (the one the AWS CLI is authenticated with) to the ",Object(r.b)("inlineCode",{parentName:"p"},"Admins")," group you created when setting up Qovery."),Object(r.b)("p",{align:"center"},Object(r.b)("img",{src:"/img/how-to-connect-to-your-eks-cluster-with-kubectl/1.png",alt:"AWS console - add admin user"}))),Object(r.b)("li",null,Object(r.b)("h4",{id:"download-the-kubeconfig-file"},"Download the Kubeconfig file"),Object(r.b)("p",null,"To connect to your EKS cluster you will need to set a context to ",Object(r.b)("inlineCode",{parentName:"p"},"kubectl"),". This is done with a ",Object(r.b)("inlineCode",{parentName:"p"},"Kubeconfig")," file."),Object(r.b)("p",null,"When installing a new cluster, Qovery stores it in an S3 bucket on your account."),Object(r.b)("p",null,"Go to S3, find the Qovery bucket, and download the file. The bucket should be named something like ",Object(r.b)("inlineCode",{parentName:"p"},"qovery-kubeconfigs-<cluster ID>.yaml"),"."),Object(r.b)("p",{align:"center"},Object(r.b)("img",{src:"/img/how-to-connect-to-your-eks-cluster-with-kubectl/2.png",alt:"AWS console - get Kubeconfig"}))),Object(r.b)("li",null,Object(r.b)("h4",{id:"set-the-context-for-kubectl"},"Set the context for kubectl"),Object(r.b)("p",null,"To set the context for kubectl, run the following command:"),Object(r.b)("pre",null,Object(r.b)("code",Object(o.a)({parentName:"pre"},{className:"language-bash"}),"export KUBECONFIG=<path to the kubeconfig file you downloaded>\n")),Object(r.b)("p",null,"You can check that it works with a kubectl command. For example:"),Object(r.b)("pre",null,Object(r.b)("code",Object(o.a)({parentName:"pre"},{className:"language-bash"}),"kubectl get nodes\n")),Object(r.b)("p",null,"You are good to go if you see an output like the following:"),Object(r.b)("pre",null,Object(r.b)("code",Object(o.a)({parentName:"pre"},{className:"language-bash"}),"NAME              STATUS   ROLES    AGE   VERSION\nzb81b1cd4-ub667   Ready    <none>   14d   v1.19.15\nzb81b1cd4-ujkm8   Ready    <none>   24d   v1.19.15\nzb81b1cd4-ujkmc   Ready    <none>   24d   v1.19.15\n"))),Object(r.b)("li",null,Object(r.b)("h4",{id:"get-your-application-namespace"},"Get your application namespace"),Object(r.b)("p",null,"When you deploy an application, Qovery will create a separate namespace for each environment on your Kubernetes cluster."),Object(r.b)("p",null,"You can get the list of the namespaces on your cluster using the following command:"),Object(r.b)("pre",null,Object(r.b)("code",Object(o.a)({parentName:"pre"},{className:"language-bash"}),"kubectl get namespaces\n")),Object(r.b)("p",null,"You will get an output similar to this one:"),Object(r.b)("pre",null,Object(r.b)("code",Object(o.a)({parentName:"pre"},{className:"language-bash"}),"NAME                  STATUS        AGE\ncert-manager          Active        44d\ndefault               Active        44d\nkube-node-lease       Active        44d\nkube-public           Active        44d\nkube-system           Active        44d\nlogging               Active        44d\nnginx-ingress         Active        44d\nprometheus            Active        44d\nqovery                Active        44d\nz0121531e-zb2daee81   Active        35d\nz016bd165-zeb51c37e   Active        31d\n")),Object(r.b)("p",null,"The Qovery application namespaces are the ones begining with ",Object(r.b)("inlineCode",{parentName:"p"},"z"),"."),Object(r.b)("p",null,"In case you have several environments running, to identify the right one:"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"Go to the Qovery console"),Object(r.b)("li",{parentName:"ul"},"Go to the right environment")),Object(r.b)("p",null,"In your URL bar you'll have something like:"),Object(r.b)("p",null,Object(r.b)("inlineCode",{parentName:"p"},"https://console.qovery.com/platform/organization/<organisation id>/projects/<project id>/environments/<environment id>/applications")),Object(r.b)("p",{align:"center"},Object(r.b)("img",{src:"/img/how-to-connect-to-your-eks-cluster-with-kubectl/3.png",alt:"Qovery console - environment"})),Object(r.b)("p",null,"The environment namespace is defined the following way: ",Object(r.b)("inlineCode",{parentName:"p"},"z<project short ID>-z<environment short ID>"),"."),Object(r.b)("p",null,"The short ID is the first section of the ID. For example, given the following ID: ",Object(r.b)("inlineCode",{parentName:"p"},"e0aabc0d-99cb-4867-ad39-332d6162c32c"),", the short ID will be ",Object(r.b)("inlineCode",{parentName:"p"},"e0aabc0d"),"."),Object(r.b)("p",null,"The following environment URL: ",Object(r.b)("inlineCode",{parentName:"p"},"https://console.qovery.com/platform/organization/<organisation ID>/projects/e0aabc0d-99cb-4867-ad39-332d6162c32c/environments/b91d2eb8-a850-49b5-8626-ade7afc4a28b/applications"),"\nwould translate to the following namespace: ",Object(r.b)("inlineCode",{parentName:"p"},"ze0aabc0d-zb91d2eb8"),".")),Object(r.b)("li",null,Object(r.b)("h4",{id:"identify-the-right-application-pods"},"Identify the right application pod(s)"),Object(r.b)("p",null,"To list the pods running in your environment namespace, run the following command:"),Object(r.b)("pre",null,Object(r.b)("code",Object(o.a)({parentName:"pre"},{className:"language-bash"}),"kubectl get pods --namespace <your namespace>\n")),Object(r.b)("p",null,"The output should be similar to this one:"),Object(r.b)("pre",null,Object(r.b)("code",Object(o.a)({parentName:"pre"},{className:"language-bash"}),"NAME                             READY   STATUS    RESTARTS   AGE\napp-z2fc29b74-5db6745975-nrw8v   1/1     Running   0          29h\napp-zabbcf976-74f969f848-kzp87   1/1     Running   0          29h\n")),Object(r.b)("p",null,"The same principle goes for finding the right application pod. Go to the application page on the Qovery console."),Object(r.b)("p",null,"You'll get an URL looking like this:"),Object(r.b)("p",null,Object(r.b)("inlineCode",{parentName:"p"},"https://console.qovery.com/platform/organization/<organisation ID>/projects/<project ID>/environments/<environment ID>/applications/abbcf976-27a1-4531-9cdd-e4d15d7b2c27/summary")),Object(r.b)("p",null,"Get the short ID of our application, in our case ",Object(r.b)("inlineCode",{parentName:"p"},"abbcf976")," which means the application pod name will start with ",Object(r.b)("inlineCode",{parentName:"p"},"app-zabbcf976"),"."),Object(r.b)("p",null,"In case you setup your app to run multiple replicas, it is possible that you see several pods begining with the same string. You can pick any of them."),Object(r.b)("p",null,"In our case the right pod corresponding to our application would be ",Object(r.b)("inlineCode",{parentName:"p"},"app-zabbcf976-74f969f848-kzp87"),".")),Object(r.b)("li",null,Object(r.b)("h4",{id:"shell-into-the-container"},"Shell into the container"),Object(r.b)("p",null,"To get a shell access to the container running inside the application pod, all you have to do is:"),Object(r.b)("pre",null,Object(r.b)("code",Object(o.a)({parentName:"pre"},{className:"language-bash"}),"kubectl exec -ti --namespace <your namespace> <your pod name> -- sh\n")),Object(r.b)("p",null,"This will open a shell inside of your application container. You can now execute any command you need.")))),Object(r.b)("h2",{id:"conclusion"},"Conclusion"),Object(r.b)("p",null,"Qovery helps you manage your Kubernetes cluster and deploy your applications on it while still giving you the power of a full access to your cluster."),Object(r.b)(i.a,{type:"note",mdxType:"Alert"},"Soon you will be able to achieve the same thing through the Qovery CLI."))}d.isMDXComponent=!0},451:function(e,t,n){var o;!function(){"use strict";var n={}.hasOwnProperty;function a(){for(var e=[],t=0;t<arguments.length;t++){var o=arguments[t];if(o){var r=typeof o;if("string"===r||"number"===r)e.push(o);else if(Array.isArray(o)&&o.length){var c=a.apply(null,o);c&&e.push(c)}else if("object"===r)for(var i in o)n.call(o,i)&&o[i]&&e.push(i)}}return e.join(" ")}e.exports?(a.default=a,e.exports=a):void 0===(o=function(){return a}.apply(t,[]))||(e.exports=o)}()},452:function(e,t,n){"use strict";n(456);var o=n(0),a=n.n(o),r=n(451),c=n.n(r);n(132);t.a=function(e){var t=e.children,n=e.classNames,o=e.fill,r=e.icon,i=e.type,l=null;switch(i){case"danger":l="alert-triangle";break;case"success":l="check-circle";break;case"warning":l="alert-triangle";break;default:l="info"}return a.a.createElement("div",{className:c()(n,"alert","alert--"+i,{"alert--fill":o,"alert--icon":!1!==r}),role:"alert"},!1!==r&&a.a.createElement("i",{className:c()("feather","icon-"+(r||l))}),t)}},453:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return m}));var o=n(0),a=n.n(o);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var u=a.a.createContext({}),s=function(e){var t=a.a.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):i({},t,{},e)),n},b=function(e){var t=s(e.components);return a.a.createElement(u.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},d=Object(o.forwardRef)((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,c=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),b=s(n),d=o,m=b["".concat(c,".").concat(d)]||b[d]||p[d]||r;return n?a.a.createElement(m,i({ref:t},u,{components:n})):a.a.createElement(m,i({ref:t},u))}));function m(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,c=new Array(r);c[0]=d;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i.mdxType="string"==typeof e?e:o,c[1]=i;for(var u=2;u<r;u++)c[u]=n[u];return a.a.createElement.apply(null,c)}return a.a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},454:function(e,t,n){"use strict";var o=n(1),a=n(0),r=n.n(a),c=n(39),i=n(460),l=n(20),u=n.n(l);t.a=function(e){var t,n=e.to,l=e.href,s=n||l,b=Object(i.a)(s),p=Object(a.useRef)(!1),d=u.a.canUseIntersectionObserver;return Object(a.useEffect)((function(){return!d&&b&&window.docusaurus.prefetch(s),function(){d&&t&&t.disconnect()}}),[s,d,b]),s&&b?r.a.createElement(c.b,Object(o.a)({},e,{onMouseEnter:function(){p.current||(window.docusaurus.preload(s),p.current=!0)},innerRef:function(e){var n,o;d&&e&&b&&(n=e,o=function(){window.docusaurus.prefetch(s)},(t=new window.IntersectionObserver((function(e){e.forEach((function(e){n===e.target&&(e.isIntersecting||e.intersectionRatio>0)&&(t.unobserve(n),t.disconnect(),o())}))}))).observe(n))},to:s})):r.a.createElement("a",Object(o.a)({},e,{href:s}))}},455:function(e,t,n){var o=n(26).f,a=Function.prototype,r=/^\s*function ([^ (]*)/;"name"in a||n(10)&&o(a,"name",{configurable:!0,get:function(){try{return(""+this).match(r)[1]}catch(e){return""}}})},456:function(e,t,n){var o=n(12);o(o.P,"Array",{fill:n(458)}),n(74)("fill")},457:function(e,t,n){"use strict";n(455);var o=n(0),a=n.n(o),r=n(452);t.a=function(e){var t=e.children,n=e.name;return a.a.createElement(r.a,{type:"info",fill:!0,icon:!1,rounded:!0,className:"list--icons list--icons--arrow list--tight list--indent margin-bottom--lg"},a.a.createElement("p",{class:"text--lg margin-bottom--sm",style:{marginTop:"-0.25em"}},"Before you begin, this ",n||"page"," assumes the following:"),t)}},458:function(e,t,n){"use strict";var o=n(28),a=n(75),r=n(27);e.exports=function(e){for(var t=o(this),n=r(t.length),c=arguments.length,i=a(c>1?arguments[1]:void 0,n),l=c>2?arguments[2]:void 0,u=void 0===l?n:a(l,n);u>i;)t[i++]=e;return t}},459:function(e,t,n){"use strict";var o=n(0),a=n.n(o),r=n(454),c=n(451),i=n.n(c);n(133);t.a=function(e){var t=e.children,n=e.className,o=e.badge,c=e.leftIcon,l=e.rightIcon,u=e.size,s=e.target,b=e.to,p=i()("jump-to","jump-to--"+u,n),d=a.a.createElement("div",{className:"jump-to--inner"},a.a.createElement("div",{className:"jump-to--inner-2"},c&&a.a.createElement("div",{className:"jump-to--left"},a.a.createElement("i",{className:"feather icon-"+c})),a.a.createElement("div",{className:"jump-to--main"},o?a.a.createElement("span",{className:"badge badge--primary badge--right"},o):"",t),a.a.createElement("div",{className:"jump-to--right"},a.a.createElement("i",{className:"feather icon-"+(l||"chevron-right")+" arrow"}))));return s?a.a.createElement("a",{href:b,target:s,className:p},d):a.a.createElement(r.a,{to:b,className:p},d)}},460:function(e,t,n){"use strict";function o(e){return!1===/^(https?:|\/\/)/.test(e)}n.d(t,"a",(function(){return o}))},461:function(e,t,n){"use strict";var o=n(463),a=n(51);function r(e,t){return t.encode?t.strict?o(e):encodeURIComponent(e):e}t.extract=function(e){return e.split("?")[1]||""},t.parse=function(e,t){var n=function(e){var t;switch(e.arrayFormat){case"index":return function(e,n,o){t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===o[e]&&(o[e]={}),o[e][t[1]]=n):o[e]=n};case"bracket":return function(e,n,o){t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==o[e]?o[e]=[].concat(o[e],n):o[e]=[n]:o[e]=n};default:return function(e,t,n){void 0!==n[e]?n[e]=[].concat(n[e],t):n[e]=t}}}(t=a({arrayFormat:"none"},t)),o=Object.create(null);return"string"!=typeof e?o:(e=e.trim().replace(/^(\?|#|&)/,""))?(e.split("&").forEach((function(e){var t=e.replace(/\+/g," ").split("="),a=t.shift(),r=t.length>0?t.join("="):void 0;r=void 0===r?null:decodeURIComponent(r),n(decodeURIComponent(a),r,o)})),Object.keys(o).sort().reduce((function(e,t){var n=o[t];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?e[t]=function e(t){return Array.isArray(t)?t.sort():"object"==typeof t?e(Object.keys(t)).sort((function(e,t){return Number(e)-Number(t)})).map((function(e){return t[e]})):t}(n):e[t]=n,e}),Object.create(null))):o},t.stringify=function(e,t){var n=function(e){switch(e.arrayFormat){case"index":return function(t,n,o){return null===n?[r(t,e),"[",o,"]"].join(""):[r(t,e),"[",r(o,e),"]=",r(n,e)].join("")};case"bracket":return function(t,n){return null===n?r(t,e):[r(t,e),"[]=",r(n,e)].join("")};default:return function(t,n){return null===n?r(t,e):[r(t,e),"=",r(n,e)].join("")}}}(t=a({encode:!0,strict:!0,arrayFormat:"none"},t));return e?Object.keys(e).sort().map((function(o){var a=e[o];if(void 0===a)return"";if(null===a)return r(o,t);if(Array.isArray(a)){var c=[];return a.slice().forEach((function(e){void 0!==e&&c.push(n(o,e,c.length))})),c.join("&")}return r(o,t)+"="+r(a,t)})).filter((function(e){return e.length>0})).join("&"):""}},462:function(e,t,n){"use strict";var o=n(0),a=n.n(o),r=(n(451),n(461)),c=n.n(r);n(134);t.a=function(e){var t=e.children,n=e.headingDepth,r=e.hideFeedbackQuestion,i="undefined"!=typeof window?window.location:null,l={title:"Tutorial on "+i+" failed",body:"The tutorial on:\n\n"+i+"\n\nHere's what went wrong:\n\n\x3c!-- Insert command output and details. Thank you for reporting! :) --\x3e"},u="https://github.com/qovery/documentation/issues/new?"+c.a.stringify(l),s=Object(o.useState)(null),b=s[0],p=s[1];return a.a.createElement("div",{className:"steps steps--h"+n},t,!r&&!b&&a.a.createElement("div",{className:"steps--feedback"},"How was it? Did this tutorial work?\xa0\xa0",a.a.createElement("span",{className:"button button--sm button--primary",onClick:function(){return p("yes")}},"Yes"),"\xa0\xa0",a.a.createElement("a",{href:u,target:"_blank",className:"button button--sm button--primary"},"No")),"yes"==b&&a.a.createElement("div",{className:"steps--feedback steps--feedback--success"},"Thanks! If you're enjoying Qovery please consider ",a.a.createElement("a",{href:"https://github.com/qovery/documentation/",target:"_blank"},"starring our Github repo"),"."))}},463:function(e,t,n){"use strict";e.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}}}]);