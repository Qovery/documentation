/*! For license information please see 55ef6d6a.6dd44281.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[102],{253:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return c})),n.d(t,"metadata",(function(){return s})),n.d(t,"rightToc",(function(){return p})),n.d(t,"default",(function(){return d}));var i=n(1),a=n(9),r=(n(0),n(441)),o=(n(448),n(440)),l=n(445),c={last_modified_on:"2023-04-27",title:"Deployment Pipeline",description:"Learn how to the Environment Deployment Pipeline works"},s={id:"using-qovery/deployment/deployment-pipeline",title:"Deployment Pipeline",description:"Learn how to the Environment Deployment Pipeline works",source:"@site/docs/using-qovery/deployment/deployment-pipeline.md",permalink:"/docs/using-qovery/deployment/deployment-pipeline",sidebar:"docs",previous:{title:"Deploying with your CI/CD",permalink:"/docs/using-qovery/deployment/deploying-with-ci-cd"},next:{title:"Deployment Actions",permalink:"/docs/using-qovery/deployment/deployment-actions"}},p=[{value:"Deployment of a stage",id:"deployment-of-a-stage",children:[]},{value:"Default Pipeline Setup",id:"default-pipeline-setup",children:[]},{value:"Visualizing and Modifying the Pipeline",id:"visualizing-and-modifying-the-pipeline",children:[]}],u={rightToc:p};function d(e){var t=e.components,n=Object(a.a)(e,["components"]);return Object(r.b)("wrapper",Object(i.a)({},u,n,{components:t,mdxType:"MDXLayout"}),Object(r.b)(l.a,{name:"documentation",mdxType:"Assumptions"},Object(r.b)("p",null,"You have created an ",Object(r.b)("a",Object(i.a)({parentName:"p"},{href:"/docs/using-qovery/configuration/environment/"}),"Environment")," and one Service (application, db or job)")),Object(r.b)("p",null,"When the deployment of an environment is triggered, Qovery executes what we call ",Object(r.b)("inlineCode",{parentName:"p"},"Deployment Pipeline"),". It basically defines the operations shall be performed to properly deploy every service defined within your environment (build the code of service X, push the image on a registry, deploy service X on the Kubernetes cluster etc..)"),Object(r.b)("p",null,"A pipeline is composed of an ordered list of ",Object(r.b)("inlineCode",{parentName:"p"},"Deployment Stages"),". Each Stage has an execution order assigned within the pipeline: If a stage A has an execution order lower than stage B then B can be executed only if the execution of stage A is completed."),Object(r.b)("p",null,"Each service of your environment belongs to one (and only one) ",Object(r.b)("inlineCode",{parentName:"p"},"Deployment Stage"),". This allows you to define at which moment of the deployment pipeline a service should be deployed and thus respect any service inter-dependency (e.g. your front-end needs to be started after the back-end, your db needs to be started before your back-end etc..)."),Object(r.b)("p",null,"Below you can find a visual example of how the pipeline looks like:"),Object(r.b)("p",{align:"center"},Object(r.b)("img",{src:"/img/deployment/example_deployment_pipeline.png",alt:"Deployment Pipeline"})),Object(r.b)("h2",{id:"deployment-of-a-stage"},"Deployment of a stage"),Object(r.b)("p",null,"When the deployment pipeline execute the deployment of a stage, the services within it will go through the ",Object(r.b)("inlineCode",{parentName:"p"},"Build")," and ",Object(r.b)("inlineCode",{parentName:"p"},"Deployment")," phases. "),Object(r.b)("p",null,"The Building process is managed by the Qovery CI which downloads your repository and generates the final image that will be run on your Kubernetes cluster. "),Object(r.b)(o.a,{type:"info",mdxType:"Alert"},Object(r.b)("p",null,"By default, the nodes building your application have the following resources: 4CPU and 4 GB memory. If you need more resources, get in touch with our support.")),Object(r.b)(o.a,{type:"info",mdxType:"Alert"},Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Important note"),": If you already have an image available on a container registry that has been previously created by your own CI/CD, it might be interesting for you to reuse it instead of re-building it again on Qovery side. Have a look at ",Object(r.b)("a",Object(i.a)({parentName:"p"},{href:"/docs/using-qovery/integration/continuous-integration/"}),"this section")," on how to deploy it.")),Object(r.b)("p",null,"The build and deploy operation of each service within a deployment stage are executed in parallel with a parallism of 4. "),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Example"),"\nIf you have 6 applications to be deployed within a stage, Qovery will:"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"build 4 applications in parallel. Once the build of one application is terminated, Qovery will start immediately another one until all the applications are built."),Object(r.b)("li",{parentName:"ul"},"deploy 4 applications in parallel on your Kubernetes cluster. Once the deployment of one application is terminated, Qovery will start immediately another one until all the applications are deployed.")),Object(r.b)(o.a,{type:"info",mdxType:"Alert"},Object(r.b)("p",null,"The parallel build and deployment is a feature in beta and free for everyone during the beta phase")),Object(r.b)("h2",{id:"default-pipeline-setup"},"Default Pipeline Setup"),Object(r.b)("p",null,"By default, the deployment pipeline is constituted of 4 deployment stages with a default service assignment rule:"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},'"0.DEFAULT DATABASE": any new service of type ',Object(r.b)("inlineCode",{parentName:"li"},"DATABASE")," will be added to this stage."),Object(r.b)("li",{parentName:"ul"},'"1.DEFAULT JOB": any new service of type ',Object(r.b)("inlineCode",{parentName:"li"},"JOB")," will be added to this stage."),Object(r.b)("li",{parentName:"ul"},'"2.DEFAULT CONTAINER": any new service of type ',Object(r.b)("inlineCode",{parentName:"li"},"CONTAINER")," will be added to this stage (application deployed from a container image)."),Object(r.b)("li",{parentName:"ul"},'"3.DEFAULT APPLICATION": any new service of type ',Object(r.b)("inlineCode",{parentName:"li"},"APPLICATION")," will be added to this stage (application deployed from a git repository).")),Object(r.b)("p",{align:"center"},Object(r.b)("img",{src:"/img/deployment/default_deployment_pipeline.png",alt:"Default Deployment Pipeline"})),Object(r.b)("p",null,"Once the service is created, the assigned stage can be modified afterwards. See ",Object(r.b)("a",Object(i.a)({parentName:"p"},{href:"/docs/using-qovery/configuration/environment/#deployment-pipeline"}),"this section")," for more information."),Object(r.b)(o.a,{type:"info",mdxType:"Alert"},Object(r.b)("p",null,"This default assignment is maintained as long as you do not delete or rename the default stage. If the default stage is modified or deleted, the service will be automatically added to the latest stage (based on the stage deployment)")),Object(r.b)("h2",{id:"visualizing-and-modifying-the-pipeline"},"Visualizing and Modifying the Pipeline"),Object(r.b)("p",null,"You can access and modify the pipeline configuration from the environment settings. Have a look at ",Object(r.b)("a",Object(i.a)({parentName:"p"},{href:"/docs/using-qovery/configuration/environment/#deployment-pipeline"}),"this section")," to know more."))}d.isMDXComponent=!0},439:function(e,t,n){var i;!function(){"use strict";var n={}.hasOwnProperty;function a(){for(var e=[],t=0;t<arguments.length;t++){var i=arguments[t];if(i){var r=typeof i;if("string"===r||"number"===r)e.push(i);else if(Array.isArray(i)&&i.length){var o=a.apply(null,i);o&&e.push(o)}else if("object"===r)for(var l in i)n.call(i,l)&&i[l]&&e.push(l)}}return e.join(" ")}e.exports?(a.default=a,e.exports=a):void 0===(i=function(){return a}.apply(t,[]))||(e.exports=i)}()},440:function(e,t,n){"use strict";n(442);var i=n(0),a=n.n(i),r=n(439),o=n.n(r);n(132);t.a=function(e){var t=e.children,n=e.classNames,i=e.fill,r=e.icon,l=e.type,c=null;switch(l){case"danger":c="alert-triangle";break;case"success":c="check-circle";break;case"warning":c="alert-triangle";break;default:c="info"}return a.a.createElement("div",{className:o()(n,"alert","alert--"+l,{"alert--fill":i,"alert--icon":!1!==r}),role:"alert"},!1!==r&&a.a.createElement("i",{className:o()("feather","icon-"+(r||c))}),t)}},441:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return b}));var i=n(0),a=n.n(i);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},r=Object.keys(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=a.a.createContext({}),p=function(e){var t=a.a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l({},t,{},e)),n},u=function(e){var t=p(e.components);return a.a.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},m=Object(i.forwardRef)((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,o=e.parentName,s=c(e,["components","mdxType","originalType","parentName"]),u=p(n),m=i,b=u["".concat(o,".").concat(m)]||u[m]||d[m]||r;return n?a.a.createElement(b,l({ref:t},s,{components:n})):a.a.createElement(b,l({ref:t},s))}));function b(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,o=new Array(r);o[0]=m;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l.mdxType="string"==typeof e?e:i,o[1]=l;for(var s=2;s<r;s++)o[s]=n[s];return a.a.createElement.apply(null,o)}return a.a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},442:function(e,t,n){var i=n(12);i(i.P,"Array",{fill:n(443)}),n(74)("fill")},443:function(e,t,n){"use strict";var i=n(27),a=n(75),r=n(26);e.exports=function(e){for(var t=i(this),n=r(t.length),o=arguments.length,l=a(o>1?arguments[1]:void 0,n),c=o>2?arguments[2]:void 0,s=void 0===c?n:a(c,n);s>l;)t[l++]=e;return t}},444:function(e,t,n){var i=n(28).f,a=Function.prototype,r=/^\s*function ([^ (]*)/;"name"in a||n(10)&&i(a,"name",{configurable:!0,get:function(){try{return(""+this).match(r)[1]}catch(e){return""}}})},445:function(e,t,n){"use strict";n(444);var i=n(0),a=n.n(i),r=n(440);t.a=function(e){var t=e.children,n=e.name;return a.a.createElement(r.a,{type:"info",fill:!0,icon:!1,rounded:!0,className:"list--icons list--icons--arrow list--tight list--indent margin-bottom--lg"},a.a.createElement("p",{class:"text--lg margin-bottom--sm",style:{marginTop:"-0.25em"}},"Before you begin, this ",n||"page"," assumes the following:"),t)}},446:function(e,t,n){"use strict";var i=n(1),a=n(0),r=n.n(a),o=n(39),l=n(449),c=n(20),s=n.n(c);t.a=function(e){var t,n=e.to,c=e.href,p=n||c,u=Object(l.a)(p),d=Object(a.useRef)(!1),m=s.a.canUseIntersectionObserver;return Object(a.useEffect)((function(){return!m&&u&&window.docusaurus.prefetch(p),function(){m&&t&&t.disconnect()}}),[p,m,u]),p&&u?r.a.createElement(o.b,Object(i.a)({},e,{onMouseEnter:function(){d.current||(window.docusaurus.preload(p),d.current=!0)},innerRef:function(e){var n,i;m&&e&&u&&(n=e,i=function(){window.docusaurus.prefetch(p)},(t=new window.IntersectionObserver((function(e){e.forEach((function(e){n===e.target&&(e.isIntersecting||e.intersectionRatio>0)&&(t.unobserve(n),t.disconnect(),i())}))}))).observe(n))},to:p})):r.a.createElement("a",Object(i.a)({},e,{href:p}))}},448:function(e,t,n){"use strict";var i=n(0),a=n.n(i),r=n(446),o=n(439),l=n.n(o);n(133);t.a=function(e){var t=e.children,n=e.className,i=e.badge,o=e.leftIcon,c=e.rightIcon,s=e.size,p=e.target,u=e.to,d=l()("jump-to","jump-to--"+s,n),m=a.a.createElement("div",{className:"jump-to--inner"},a.a.createElement("div",{className:"jump-to--inner-2"},o&&a.a.createElement("div",{className:"jump-to--left"},a.a.createElement("i",{className:"feather icon-"+o})),a.a.createElement("div",{className:"jump-to--main"},i?a.a.createElement("span",{className:"badge badge--primary badge--right"},i):"",t),a.a.createElement("div",{className:"jump-to--right"},a.a.createElement("i",{className:"feather icon-"+(c||"chevron-right")+" arrow"}))));return p?a.a.createElement("a",{href:u,target:p,className:d},m):a.a.createElement(r.a,{to:u,className:d},m)}},449:function(e,t,n){"use strict";function i(e){return!1===/^(https?:|\/\/)/.test(e)}n.d(t,"a",(function(){return i}))}}]);