/*! For license information please see df1c18d8.6294f506.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[253],{405:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return c})),a.d(t,"metadata",(function(){return l})),a.d(t,"rightToc",(function(){return s})),a.d(t,"default",(function(){return p}));var n=a(1),r=a(9),o=(a(0),a(444)),i=(a(449),a(443)),c=(a(448),{last_modified_on:"2022-11-18",$schema:"/.meta/.schemas/guides.json",title:"Grafana setup with Qovery",description:"Easily setup Grafana with Qovery",author_github:"https://github.com/deimosfr",tags:["type: tutorial","technology: qovery"],hide_pagination:!0}),l={categories:[{name:"tutorial",title:"Tutorial",description:"Simple step-by-step tutorials.",permalink:"/guides/tutorial"}],coverLabel:"Grafana setup with Qovery",description:"Easily setup Grafana with Qovery",permalink:"/guides/tutorial/grafana-install",readingTime:"3 min read",source:"@site/guides/tutorial/grafana-install.md",tags:[{label:"type: tutorial",permalink:"/guides/tags/type-tutorial"},{label:"technology: qovery",permalink:"/guides/tags/technology-qovery"}],title:"Grafana setup with Qovery",truncated:!1,prevItem:{title:"Getting started with Spring Boot on Qovery",permalink:"/guides/tutorial/quickstart-springboot"},nextItem:{title:"GraphQL API with Hasura",permalink:"/guides/tutorial/graphql-api-with-hasura"}},s=[{value:"Grafana setup",id:"grafana-setup",children:[{value:"Create a Grafana application",id:"create-a-grafana-application",children:[]},{value:"Configure database storage",id:"configure-database-storage",children:[]}]},{value:"Usage",id:"usage",children:[]},{value:"Cloudwatch Datasource",id:"cloudwatch-datasource",children:[]},{value:"Links",id:"links",children:[]}],u={rightToc:s};function p(e){var t=e.components,a=Object(r.a)(e,["components"]);return Object(o.b)("wrapper",Object(n.a)({},u,a,{components:t,mdxType:"MDXLayout"}),Object(o.b)("p",null,Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"https://grafana.com/grafana/"}),"Grafana")," is a famous Open Source solution to observe graphs and logs, supporting many data sources."),Object(o.b)("p",null,"This tutorial explains how to install Grafana on Qovery, and you will see how easy it is."),Object(o.b)("h2",{id:"grafana-setup"},"Grafana setup"),Object(o.b)("p",null,"First of all, create a project and an environment. Then let's create Grafana application."),Object(o.b)(i.a,{type:"info",mdxType:"Alert"},Object(o.b)("p",null,"At the moment, Qovery does not support configuration file injection into Docker. So it can't be connected to an external database.\nThe currently used database is stored on the volume, so data will be lost on an application deletion. Qovery is going to implement configuration files for Docker in the coming weeks")),Object(o.b)("h3",{id:"create-a-grafana-application"},"Create a Grafana application"),Object(o.b)("p",null,"Connect to the console and add a new application:"),Object(o.b)("p",{Valign:"center"},Object(o.b)("img",{src:"/img/grafana/qovery_create_app.png",alt:"create gafana app"})),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},"Set an application name"),Object(o.b)("li",{parentName:"ol"},"Select the application source type: Container registry"),Object(o.b)("li",{parentName:"ol"},"Select DockerHub Public (or the one you have. If you do not have one, create a registry pointing to DockerHub)"),Object(o.b)("li",{parentName:"ol"},"Set the image name: grafana/grafana"),Object(o.b)("li",{parentName:"ol"},"Take a look at the latest ",Object(o.b)("a",Object(n.a)({parentName:"li"},{href:"https://hub.docker.com/r/grafana/grafana/tags"}),"Grafana tags")," and set the tag you want to use (do not use latest one to avoid later issues)")),Object(o.b)("p",null,"Then set the resources to 1 instance and let other default values (Grafana doesn't consume a lot of resources):"),Object(o.b)("p",{Valign:"center"},Object(o.b)("img",{src:"/img/grafana/qovery_set_resources.png",alt:"set resources"})),Object(o.b)("p",null,"Add a port mapping to the application, and set it to ",Object(o.b)("inlineCode",{parentName:"p"},"3000"),":"),Object(o.b)("p",{Valign:"center"},Object(o.b)("img",{src:"/img/grafana/qovery_set_port.png",alt:"set port"})),Object(o.b)("p",null,"Finally, click on the ",Object(o.b)("inlineCode",{parentName:"p"},"Create")," button:"),Object(o.b)("p",{Valign:"center"},Object(o.b)("img",{src:"/img/grafana/qovery_create.png",alt:"create app"})),Object(o.b)("h3",{id:"configure-database-storage"},"Configure database storage"),Object(o.b)("p",null,"We're now going to create a volume that will contain Grafana default database:"),Object(o.b)("p",{Valign:"center"},Object(o.b)("img",{src:"/img/grafana/qovery_volume.png",alt:"create app"})),Object(o.b)("p",null,"Go into Settings > Storage > Add Storage. Set the ",Object(o.b)("inlineCode",{parentName:"p"},"Path")," to ",Object(o.b)("inlineCode",{parentName:"p"},"/var/lib/grafana")," and the ",Object(o.b)("inlineCode",{parentName:"p"},"Size")," to ",Object(o.b)("inlineCode",{parentName:"p"},"4Gi"),". Click on ",Object(o.b)("inlineCode",{parentName:"p"},"Create"),"."),Object(o.b)("h2",{id:"usage"},"Usage"),Object(o.b)("p",null,"Now you can deploy Grafana :). On the top right, you have the ",Object(o.b)("inlineCode",{parentName:"p"},"Open links")," button which will help you to get quick access. Then connect with those credentials:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Login: admin"),Object(o.b)("li",{parentName:"ul"},"Password: admin")),Object(o.b)(i.a,{type:"warning",mdxType:"Alert"},Object(o.b)("p",null,"Update the default password with a strong one as it is publicly exposed.")),Object(o.b)("h2",{id:"cloudwatch-datasource"},"Cloudwatch Datasource"),Object(o.b)("p",null,"You can add several data sources to Grafana. One we recommend at Qovery for full-text search is Cloudwatch. First of all, you have to ",Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"/guides/tutorial/cloudwatch-integration/"}),"follow this guide")," to ensure all your logs are sent to Cloudwatch. Then, you can add a new data source in Grafana:"),Object(o.b)("p",{Valign:"center"},Object(o.b)("img",{src:"/img/grafana/grafana_cloudwatch.png",alt:"grafana cloudwatch"})),Object(o.b)("p",null,"We advise you to use ",Object(o.b)("inlineCode",{parentName:"p"},"assume role")," or use a dedicated service account in read-only to access your logs. In this case, those permissions will be required:"),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-json"}),'{\n  "Version": "2012-10-17",\n  "Statement": [\n    {\n      "Sid": "AllowReadingLogsFromCloudWatch",\n      "Effect": "Allow",\n      "Action": [\n        "logs:DescribeLogGroups",\n        "logs:GetLogGroupFields",\n        "logs:StartQuery",\n        "logs:StopQuery",\n        "logs:GetQueryResults",\n        "logs:GetLogEvents"\n      ],\n      "Resource": "*"\n    },\n    {\n      "Sid": "AllowReadingTagsInstancesRegionsFromEC2",\n      "Effect": "Allow",\n      "Action": ["ec2:DescribeTags", "ec2:DescribeInstances", "ec2:DescribeRegions"],\n      "Resource": "*"\n    },\n    {\n      "Sid": "AllowReadingResourcesForTags",\n      "Effect": "Allow",\n      "Action": "tag:GetResources",\n      "Resource": "*"\n    }\n  ]\n}\n')),Object(o.b)("p",null,"More info: ",Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"https://grafana.com/docs/grafana/latest/datasources/aws-cloudwatch/"}),"https://grafana.com/docs/grafana/latest/datasources/aws-cloudwatch/")),Object(o.b)("p",null,"Once done, you're able to create dashboards using Cloudwatch datasource and perform queries to your logs."),Object(o.b)("h2",{id:"links"},"Links"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(n.a)({parentName:"li"},{href:"https://grafana.com/docs/grafana/v9.0/setup-grafana/configure-docker/#configure-aws-credentials-for-cloudwatch-support"}),"Add Cloudwatch support to Grafana")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(n.a)({parentName:"li"},{href:"https://grafana.com/docs/grafana/latest/datasources/aws-cloudwatch/"}),"Grafana configuration for AWS"))))}p.isMDXComponent=!0},442:function(e,t,a){var n;!function(){"use strict";var a={}.hasOwnProperty;function r(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var o=typeof n;if("string"===o||"number"===o)e.push(n);else if(Array.isArray(n)&&n.length){var i=r.apply(null,n);i&&e.push(i)}else if("object"===o)for(var c in n)a.call(n,c)&&n[c]&&e.push(c)}}return e.join(" ")}e.exports?(r.default=r,e.exports=r):void 0===(n=function(){return r}.apply(t,[]))||(e.exports=n)}()},443:function(e,t,a){"use strict";a(447);var n=a(0),r=a.n(n),o=a(442),i=a.n(o);a(132);t.a=function(e){var t=e.children,a=e.classNames,n=e.fill,o=e.icon,c=e.type,l=null;switch(c){case"danger":l="alert-triangle";break;case"success":l="check-circle";break;case"warning":l="alert-triangle";break;default:l="info"}return r.a.createElement("div",{className:i()(a,"alert","alert--"+c,{"alert--fill":n,"alert--icon":!1!==o}),role:"alert"},!1!==o&&r.a.createElement("i",{className:i()("feather","icon-"+(o||l))}),t)}},444:function(e,t,a){"use strict";a.d(t,"a",(function(){return p})),a.d(t,"b",(function(){return f}));var n=a(0),r=a.n(n);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=r.a.createContext({}),u=function(e){var t=r.a.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):c({},t,{},e)),a},p=function(e){var t=u(e.components);return r.a.createElement(s.Provider,{value:t},e.children)},b={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},d=Object(n.forwardRef)((function(e,t){var a=e.components,n=e.mdxType,o=e.originalType,i=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),p=u(a),d=n,f=p["".concat(i,".").concat(d)]||p[d]||b[d]||o;return a?r.a.createElement(f,c({ref:t},s,{components:a})):r.a.createElement(f,c({ref:t},s))}));function f(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=a.length,i=new Array(o);i[0]=d;var c={};for(var l in t)hasOwnProperty.call(t,l)&&(c[l]=t[l]);c.originalType=e,c.mdxType="string"==typeof e?e:n,i[1]=c;for(var s=2;s<o;s++)i[s]=a[s];return r.a.createElement.apply(null,i)}return r.a.createElement.apply(null,a)}d.displayName="MDXCreateElement"},445:function(e,t,a){"use strict";var n=a(1),r=a(0),o=a.n(r),i=a(39),c=a(450),l=a(20),s=a.n(l);t.a=function(e){var t,a=e.to,l=e.href,u=a||l,p=Object(c.a)(u),b=Object(r.useRef)(!1),d=s.a.canUseIntersectionObserver;return Object(r.useEffect)((function(){return!d&&p&&window.docusaurus.prefetch(u),function(){d&&t&&t.disconnect()}}),[u,d,p]),u&&p?o.a.createElement(i.b,Object(n.a)({},e,{onMouseEnter:function(){b.current||(window.docusaurus.preload(u),b.current=!0)},innerRef:function(e){var a,n;d&&e&&p&&(a=e,n=function(){window.docusaurus.prefetch(u)},(t=new window.IntersectionObserver((function(e){e.forEach((function(e){a===e.target&&(e.isIntersecting||e.intersectionRatio>0)&&(t.unobserve(a),t.disconnect(),n())}))}))).observe(a))},to:u})):o.a.createElement("a",Object(n.a)({},e,{href:u}))}},446:function(e,t,a){var n=a(26).f,r=Function.prototype,o=/^\s*function ([^ (]*)/;"name"in r||a(10)&&n(r,"name",{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(e){return""}}})},447:function(e,t,a){var n=a(12);n(n.P,"Array",{fill:a(451)}),a(74)("fill")},448:function(e,t,a){"use strict";a(446);var n=a(0),r=a.n(n),o=a(443);t.a=function(e){var t=e.children,a=e.name;return r.a.createElement(o.a,{type:"info",fill:!0,icon:!1,rounded:!0,className:"list--icons list--icons--arrow list--tight list--indent margin-bottom--lg"},r.a.createElement("p",{class:"text--lg margin-bottom--sm",style:{marginTop:"-0.25em"}},"Before you begin, this ",a||"page"," assumes the following:"),t)}},449:function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(445),i=a(442),c=a.n(i);a(133);t.a=function(e){var t=e.children,a=e.className,n=e.badge,i=e.leftIcon,l=e.rightIcon,s=e.size,u=e.target,p=e.to,b=c()("jump-to","jump-to--"+s,a),d=r.a.createElement("div",{className:"jump-to--inner"},r.a.createElement("div",{className:"jump-to--inner-2"},i&&r.a.createElement("div",{className:"jump-to--left"},r.a.createElement("i",{className:"feather icon-"+i})),r.a.createElement("div",{className:"jump-to--main"},n?r.a.createElement("span",{className:"badge badge--primary badge--right"},n):"",t),r.a.createElement("div",{className:"jump-to--right"},r.a.createElement("i",{className:"feather icon-"+(l||"chevron-right")+" arrow"}))));return u?r.a.createElement("a",{href:p,target:u,className:b},d):r.a.createElement(o.a,{to:p,className:b},d)}},450:function(e,t,a){"use strict";function n(e){return!1===/^(https?:|\/\/)/.test(e)}a.d(t,"a",(function(){return n}))},451:function(e,t,a){"use strict";var n=a(28),r=a(75),o=a(27);e.exports=function(e){for(var t=n(this),a=o(t.length),i=arguments.length,c=r(i>1?arguments[1]:void 0,a),l=i>2?arguments[2]:void 0,s=void 0===l?a:r(l,a);s>c;)t[c++]=e;return t}}}]);