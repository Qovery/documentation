/*! For license information please see 3cfde410.b047a71f.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[76],{228:function(e,t,r){"use strict";r.r(t),r.d(t,"frontMatter",(function(){return l})),r.d(t,"metadata",(function(){return i})),r.d(t,"rightToc",(function(){return s})),r.d(t,"default",(function(){return d}));var o=r(1),n=r(9),a=(r(0),r(472)),c=r(471),l={last_modified_on:"2025-02-24",title:"Cluster Troubleshoot",description:"Everything you need to troubleshoot your cluster with Qovery",hide_pagination:!0},i={id:"using-qovery/troubleshoot/cluster-troubleshoot",title:"Cluster Troubleshoot",description:"Everything you need to troubleshoot your cluster with Qovery",source:"@site/docs/using-qovery/troubleshoot/cluster-troubleshoot.md",permalink:"/docs/using-qovery/troubleshoot/cluster-troubleshoot",sidebar:"docs",previous:{title:"Service Run Troubleshoot",permalink:"/docs/using-qovery/troubleshoot/service-run-troubleshoot"},next:{title:"Audit Logs",permalink:"/docs/using-qovery/audit-logs"}},s=[{value:"How do I delete a cluster with dependency violation errors?",id:"how-do-i-delete-a-cluster-with-dependency-violation-errors",children:[]},{value:"I don&#39;t have Qovery access anymore, how could I delete Qovery deployed resources on my AWS account?",id:"i-dont-have-qovery-access-anymore-how-could-i-delete-qovery-deployed-resources-on-my-aws-account",children:[{value:"From the AWS console",id:"from-the-aws-console",children:[]},{value:"From the CLI",id:"from-the-cli",children:[]}]},{value:"My cloud account has been blockVed, what should I do?",id:"my-cloud-account-has-been-blockved-what-should-i-do",children:[]}],u={rightToc:s};function d(e){var t=e.components,r=Object(n.a)(e,["components"]);return Object(a.b)("wrapper",Object(o.a)({},u,r,{components:t,mdxType:"MDXLayout"}),Object(a.b)("p",null,"Within this section you will find the common errors you might encounter when deploying or running your clusters with Qovery"),Object(a.b)("h2",{id:"how-do-i-delete-a-cluster-with-dependency-violation-errors"},"How do I delete a cluster with dependency violation errors?"),Object(a.b)("p",null,"When attempting to delete a Qovery cluster, you may encounter dependency violation errors (",Object(a.b)("inlineCode",{parentName:"p"},"DependencyViolation"),") indicating that certain items cannot be deleted due to existing dependencies.\nThis typically happens when there are resources using the items (here: subnets) that were not deployed or managed by Qovery. Example:"),Object(a.b)("pre",null,Object(a.b)("code",Object(o.a)({parentName:"pre"},{}),"DeleteError - Unknown error while performing Terraform command (`terraform destroy -lock=false -no-color -auto-approve`), here is the error:\n\nError: deleting EC2 Subnet (subnet-xxx): operation error EC2: DeleteSubnet, https response error StatusCode: 400, RequestID: xxx, api error DependencyViolation: The subnet 'subnet-xxx' has dependencies and cannot be deleted.\n")),Object(a.b)("p",null,"To resolve subnet deletion errors and successfully delete your cluster, follow these steps:"),Object(a.b)("ol",null,Object(a.b)("li",{parentName:"ol"},"Log in to your cloud provider console"),Object(a.b)("li",{parentName:"ol"},"Navigate to the VPC section (or the section where deletion items are in failure)"),Object(a.b)("li",{parentName:"ol"},"Attempt to delete the items (here: subnet) that is failing. This will trigger a notification showing the blocking elements")),Object(a.b)("p",{align:"center"},Object(a.b)("img",{src:"/img/cluster_troubleshoot/cluster_troubleshot_subnet.png",alt:"AWS VPC subnet"})),Object(a.b)("ol",{start:4},Object(a.b)("li",{parentName:"ol"},"Review the items (here: Network interfaces) that are blocking the deletion:")),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"Check the Interface Type and Description for each blocking resource"),Object(a.b)("li",{parentName:"ul"},"Verify that these resources are safe to delete and not being used by any critical services.")),Object(a.b)("p",{align:"center"},Object(a.b)("img",{src:"/img/cluster_troubleshoot/cluster_troubleshot_net_inf.png",alt:"AWS network interfaces"})),Object(a.b)("ol",{start:5},Object(a.b)("li",{parentName:"ol"},"Delete the identified blocking network interfaces if they are no longer needed"),Object(a.b)("li",{parentName:"ol"},"Return to Qovery and retry the cluster deletion process")),Object(a.b)("h2",{id:"i-dont-have-qovery-access-anymore-how-could-i-delete-qovery-deployed-resources-on-my-aws-account"},"I don't have Qovery access anymore, how could I delete Qovery deployed resources on my AWS account?"),Object(a.b)("h3",{id:"from-the-aws-console"},"From the AWS console"),Object(a.b)("p",null,'Unfortunately, there is no automatic way to do it with Qovery once we don\'t have access. However, AWS provides an easy way to retrieve those resources, so you can manually perform the delete. To do so, go on the AWS web console, and search for "Resource Groups & Tag Editor" service, then:'),Object(a.b)("p",{Valign:"center"},Object(a.b)("img",{src:"/img/aws_resource_groups.png",alt:"Resource groups search by tag"})),Object(a.b)("ol",null,Object(a.b)("li",{parentName:"ol"},'Click on "Create Resource Group".'),Object(a.b)("li",{parentName:"ol"},'In Tags, enter: "ClusterLongId".'),Object(a.b)("li",{parentName:"ol"},'In the "Optional Tag value", enter the Qovery cluster ID. If you don\'t have it, let AWS suggest it for you. If you have Qovery deployed elements remainings, it will propose the Cluster long ID automatically.'),Object(a.b)("li",{parentName:"ol"},'Click on "Add".'),Object(a.b)("li",{parentName:"ol"},"You should see the filter with the information you just entered."),Object(a.b)("li",{parentName:"ol"},'Click on "Preview groups resources".'),Object(a.b)("li",{parentName:"ol"},"You'll have all elements deployed by Qovery and you can delete what you want.")),Object(a.b)("h3",{id:"from-the-cli"},"From the CLI"),Object(a.b)("p",null,"If you want to be able to delete the resources deployed by Qovery, you can use the AWS CLI to list and delete the resources. Here is an example of how to list all the resources deployed by Qovery:"),Object(a.b)("pre",null,Object(a.b)("code",Object(o.a)({parentName:"pre"},{className:"language-bash"}),'#!/bin/bash\nVPC_ID=$1\necho "Resources in VPC: $VPC_ID"\n\necho "Subnets:"\naws ec2 describe-subnets --filters "Name=vpc-id,Values=$VPC_ID"\n\necho "Route Tables:"\naws ec2 describe-route-tables --filters "Name=vpc-id,Values=$VPC_ID"\n\necho "Security Groups:"\naws ec2 describe-security-groups --filters "Name=vpc-id,Values=$VPC_ID"\n\necho "NATs Gateway:"\naws ec2 describe-nat-gateways --filter "Name=vpc-id,Values=$VPC_ID"\n\necho "Internet Gateway:"\naws ec2 describe-internet-gateways --filters "Name=attachment.vpc-id,Values=$VPC_ID"\n\necho "Instances:"\naws ec2 describe-instances --filters "Name=vpc-id,Values=$VPC_ID"\n\necho "Network Interfaces:"\naws ec2 describe-network-interfaces --filters "Name=vpc-id,Values=$VPC_ID"\n\necho "EC2 Instances:"\naws ec2 describe-instances --filters "Name=vpc-id,Values=$VPC_ID"\n\necho "S3 VPC Endpoints:"\naws ec2 describe-vpc-endpoints --filters "Name=vpc-id,Values=$VPC_ID"\n\necho "Load Balancers:"\naws elbv2 describe-load-balancers --query "LoadBalancers[?VpcId==\'$VPC_ID\']"\necho "Load Balancers:"\naws elb describe-load-balancers --query "LoadBalancers[?VpcId==\'$VPC_ID\']" \n')),Object(a.b)("h2",{id:"my-cloud-account-has-been-blockved-what-should-i-do"},"My cloud account has been blockVed, what should I do?"),Object(a.b)("p",null,"If you encounter this kind of error during an infrastructure deployment (including managed DBs):"),Object(a.b)("pre",null,Object(a.b)("code",Object(o.a)({parentName:"pre"},{className:"language-bash"}),"This account is currently blocked by your cloud provider, please contact them directly.\n")),Object(a.b)("p",null,"Or"),Object(a.b)("pre",null,Object(a.b)("code",Object(o.a)({parentName:"pre"},{className:"language-bash"}),"This AWS account is currently blocked and not recognized as a valid account.\nPlease contact aws-verification@amazon.com directly to get more details.\nMaybe you are not allowed to use your free tier in this region?\nMaybe you need to provide billing info?\n")),Object(a.b)("p",null,"This error is likely due to a billing issue or blocked free-tier usage in the given region."),Object(a.b)("p",null,"Unfortunately, there is nothing Qovery can do. You need to reach out directly to your cloud provider to get more details and get your account unblocked."),Object(a.b)(c.a,{type:"info",mdxType:"Alert"},"If you are using AWS, you can contact them directly via dedicated email: aws-verification@amazon.com."),Object(a.b)("h1",{id:"more"},"More"),Object(a.b)("p",null,"You are looking to troubleshoot your application with Qovery? ",Object(a.b)("a",Object(o.a)({parentName:"p"},{href:"/guides/getting-started/debugging/"}),"Read this very short guide")))}d.isMDXComponent=!0},470:function(e,t,r){var o;!function(){"use strict";var r={}.hasOwnProperty;function n(){for(var e=[],t=0;t<arguments.length;t++){var o=arguments[t];if(o){var a=typeof o;if("string"===a||"number"===a)e.push(o);else if(Array.isArray(o)&&o.length){var c=n.apply(null,o);c&&e.push(c)}else if("object"===a)for(var l in o)r.call(o,l)&&o[l]&&e.push(l)}}return e.join(" ")}e.exports?(n.default=n,e.exports=n):void 0===(o=function(){return n}.apply(t,[]))||(e.exports=o)}()},471:function(e,t,r){"use strict";r(473);var o=r(0),n=r.n(o),a=r(470),c=r.n(a);r(132);t.a=function(e){var t=e.children,r=e.classNames,o=e.fill,a=e.icon,l=e.type,i=null;switch(l){case"danger":i="alert-triangle";break;case"success":i="check-circle";break;case"warning":i="alert-triangle";break;default:i="info"}return n.a.createElement("div",{className:c()(r,"alert","alert--"+l,{"alert--fill":o,"alert--icon":!1!==a}),role:"alert"},!1!==a&&n.a.createElement("i",{className:c()("feather","icon-"+(a||i))}),t)}},472:function(e,t,r){"use strict";r.d(t,"a",(function(){return d})),r.d(t,"b",(function(){return h}));var o=r(0),n=r.n(o);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t){if(null==e)return{};var r,o,n=function(e,t){if(null==e)return{};var r,o,n={},a=Object.keys(e);for(o=0;o<a.length;o++)r=a[o],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var s=n.a.createContext({}),u=function(e){var t=n.a.useContext(s),r=t;return e&&(r="function"==typeof e?e(t):l({},t,{},e)),r},d=function(e){var t=u(e.components);return n.a.createElement(s.Provider,{value:t},e.children)},b={inlineCode:"code",wrapper:function(e){var t=e.children;return n.a.createElement(n.a.Fragment,{},t)}},p=Object(o.forwardRef)((function(e,t){var r=e.components,o=e.mdxType,a=e.originalType,c=e.parentName,s=i(e,["components","mdxType","originalType","parentName"]),d=u(r),p=o,h=d["".concat(c,".").concat(p)]||d[p]||b[p]||a;return r?n.a.createElement(h,l({ref:t},s,{components:r})):n.a.createElement(h,l({ref:t},s))}));function h(e,t){var r=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=r.length,c=new Array(a);c[0]=p;var l={};for(var i in t)hasOwnProperty.call(t,i)&&(l[i]=t[i]);l.originalType=e,l.mdxType="string"==typeof e?e:o,c[1]=l;for(var s=2;s<a;s++)c[s]=r[s];return n.a.createElement.apply(null,c)}return n.a.createElement.apply(null,r)}p.displayName="MDXCreateElement"},473:function(e,t,r){var o=r(12);o(o.P,"Array",{fill:r(474)}),r(74)("fill")},474:function(e,t,r){"use strict";var o=r(27),n=r(75),a=r(26);e.exports=function(e){for(var t=o(this),r=a(t.length),c=arguments.length,l=n(c>1?arguments[1]:void 0,r),i=c>2?arguments[2]:void 0,s=void 0===i?r:n(i,r);s>l;)t[l++]=e;return t}}}]);