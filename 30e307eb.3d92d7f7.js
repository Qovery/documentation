/*! For license information please see 30e307eb.3d92d7f7.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{206:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return c})),n.d(t,"metadata",(function(){return b})),n.d(t,"rightToc",(function(){return s})),n.d(t,"default",(function(){return d}));var r=n(1),a=n(9),o=(n(0),n(422)),l=n(431),i=n(421),c=(n(426),{last_modified_on:"2023-12-03",title:"Kubernetes",description:"Learn how to install and configure Qovery on your own Kubernetes cluster (BYOK) / Self-managed Kubernetes cluster"}),b={id:"using-qovery/configuration/provider/kubernetes",title:"Kubernetes",description:"Learn how to install and configure Qovery on your own Kubernetes cluster (BYOK) / Self-managed Kubernetes cluster",source:"@site/docs/using-qovery/configuration/provider/kubernetes.md",permalink:"/docs/using-qovery/configuration/provider/kubernetes",sidebar:"docs",previous:{title:"Provider",permalink:"/docs/using-qovery/configuration/provider"},next:{title:"Cluster Advanced Settings",permalink:"/docs/using-qovery/configuration/cluster-advanced-settings"}},s=[{value:"Components",id:"components",children:[]},{value:"What&#39;s the requirements?",id:"whats-the-requirements",children:[]},{value:"Install Qovery",id:"install-qovery",children:[]},{value:"Configuration",id:"configuration",children:[{value:"Qovery",id:"qovery",children:[]},{value:"Ingress",id:"ingress",children:[]},{value:"DNS",id:"dns",children:[]},{value:"Logging",id:"logging",children:[]},{value:"Certificates",id:"certificates",children:[]}]},{value:"Observability",id:"observability",children:[{value:"Metrics Server",id:"metrics-server",children:[]}]},{value:"FAQ",id:"faq",children:[{value:"I have a non-covered use case. What should I do?",id:"i-have-a-non-covered-use-case-what-should-i-do",children:[]},{value:"Can I host the Qovery control plane on my own?",id:"can-i-host-the-qovery-control-plane-on-my-own",children:[]}]}],u={rightToc:s};function d(e){var t=e.components,n=Object(a.a)(e,["components"]);return Object(o.b)("wrapper",Object(r.a)({},u,n,{components:t,mdxType:"MDXLayout"}),Object(o.b)(i.a,{type:"warning",mdxType:"Alert"},Object(o.b)("p",null,"Installing Qovery on your Kubernetes cluster is currently in beta. ",Object(o.b)("a",Object(r.a)({parentName:"p"},{href:"https://www.qovery.com/solutions/bring-your-own-kubernetes"}),"You need to request your access here"),".")),Object(o.b)(i.a,{type:"info",mdxType:"Alert"},Object(o.b)("p",null,"This section is for Kubernetes power-users. If you are not familiar with Kubernetes, we recommend you to use Qovery on a Managed Kubernetes cluster on ",Object(o.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/using-qovery/configuration/cloud-service-provider/amazon-web-services/"}),"AWS"),", ",Object(o.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/using-qovery/configuration/cloud-service-provider/google-cloud-platform/"}),"GCP"),", ",Object(o.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/using-qovery/configuration/cloud-service-provider/microsoft-azure/"}),"Scaleway"),", or contact us.")),Object(o.b)("p",null,"Qovery Self-Managed or BYOK (Bring Your Own Kubernetes) is a self-hosted version of Qovery. It allows you to install Qovery on your own Kubernetes cluster.\nRead ",Object(o.b)("a",Object(r.a)({parentName:"p"},{href:"https://www.qovery.com/blog/kubernetes-managed-by-qovery-vs-self-managed-byok"}),"this article")," to better understand the difference with the Managed Kubernetes by Qovery. In a nutshell, Qovery Managed/BYOK is for Kubernetes experts who want to manage their own Kubernetes cluster.\nIn this version, Qovery does not manage the Kubernetes cluster for you."),Object(o.b)("p",null,"This page explains how to install and configure Qovery on your Kubernetes cluster. If you are looking for a quick step-by-step guide, please follow the ",Object(o.b)("a",Object(r.a)({parentName:"p"},{href:"/guides/provider/guide-kubernetes/"}),"Kubernetes guide"),"."),Object(o.b)("h2",{id:"components"},"Components"),Object(o.b)("p",{align:"center"},Object(o.b)("img",{src:"/img/qovery_byok_how_it_works.jpg",alt:"How Qovery works with Self Managed Kubernetes cluster"})),Object(o.b)("p",null,"They are two types of components:"),Object(o.b)("p",null,"Qovery components:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Qovery Control Plane: the Qovery Control Plane is the brain of Qovery. It is responsible for managing your applications and providing the API to interact with Qovery."),Object(o.b)("li",{parentName:"ul"},"Qovery Engine: the Qovery Engine is responsible for managing your applications on your Kubernetes cluster. It is installed on your Kubernetes cluster."),Object(o.b)("li",{parentName:"ul"},"Qovery Cluster Agent (optional): the Qovery Cluster Agent is responsible for securely forwarding logs and metrics from your Kubernetes cluster to Qovery control plane."),Object(o.b)("li",{parentName:"ul"},"Qovery Shell Agent (optional): the Qovery Shell Agent is responsible for giving you a secure remote shell access to your Kubernetes pods if you need it. E.g. when using ",Object(o.b)("inlineCode",{parentName:"li"},"qovery shell")," command.")),Object(o.b)("p",null,"Third-party components:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"NGINX Ingress Controller (optional)"),Object(o.b)("li",{parentName:"ul"},"External DNS (optional)"),Object(o.b)("li",{parentName:"ul"},"Loki (optional)"),Object(o.b)("li",{parentName:"ul"},"Promtail (optional)"),Object(o.b)("li",{parentName:"ul"},"Cert Manager (optional)"),Object(o.b)("li",{parentName:"ul"},"...")),Object(o.b)("p",null,"You can chose what you want to install and manage, and you will have a description of what services are usedi, and responsible for. You can disable them if you don't want to use them. And you can even install other components if you want to."),Object(o.b)("h2",{id:"whats-the-requirements"},"What's the requirements?"),Object(o.b)("p",null,"Qovery requires a Kubernetes cluster with the following requirements:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Kubernetes version 1.26 or higher"),Object(o.b)("li",{parentName:"ul"},"Helm version 3.0 or higher"),Object(o.b)("li",{parentName:"ul"},"2 CPU"),Object(o.b)("li",{parentName:"ul"},"4 GB RAM"),Object(o.b)("li",{parentName:"ul"},"20 GB disk space"),Object(o.b)("li",{parentName:"ul"},"Being able to access to the Internet")),Object(o.b)("h2",{id:"install-qovery"},"Install Qovery"),Object(o.b)(l.a,{headingDepth:3,mdxType:"Steps"},Object(o.b)("ol",null,Object(o.b)("li",null,Object(o.b)("p",null,"Install ",Object(o.b)("a",Object(r.a)({parentName:"p"},{href:"https://helm.sh"}),"Helm")," command line tool.")),Object(o.b)("li",null,Object(o.b)("p",null,"Add Qovery Helm repository."),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-bash"}),"helm repo add qovery https://helm.qovery.com\nhelm repo update\n"))),Object(o.b)("li",null,Object(o.b)("p",null,"Login to the Qovery console, create a cluster until it's asked to save informations in the ",Object(o.b)("inlineCode",{parentName:"p"},"values.yaml")," file.")),Object(o.b)("li",null,Object(o.b)("p",null,"You will find several ",Object(o.b)("inlineCode",{parentName:"p"},"values.yaml")," files. Depending on you need, select the one you want and update the configuration accordingly:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("inlineCode",{parentName:"li"},"values-demo.yaml"),": this version is to locally test with k3s or minikube"),Object(o.b)("li",{parentName:"ul"},Object(o.b)("inlineCode",{parentName:"li"},"values-<provider-name>.yaml"),": find versions made for some providers")),Object(o.b)(i.a,{type:"info",mdxType:"Alert"},Object(o.b)("p",null,"Note: The provided values files are examples. There is no restriction where Qovery can be deployed. Feel free to copy or use an existing example and adapt it to your needs.")),Object(o.b)("p",null,"Here is an example of how the chart works:"),Object(o.b)("details",null,Object(o.b)("summary",null,"values-demo.yaml"),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-yaml"}),'## Services you can enable or disable\nservices:\n  qovery:\n    qovery-cluster-agent:\n      enabled: true\n    qovery-shell-agent:\n      enabled: true\n    qovery-engine:\n      enabled: true\n  ingress:\n    ingress-nginx:\n      enabled: true\n  dns:\n    external-dns:\n      enabled: true\n  logging:\n    loki:\n      enabled: true\n    promtail:\n      enabled: true\n  certificates:\n    cert-manager:\n      enabled: true\n    qovery-cert-manager-webhook:\n      enabled: true\n    cert-manager-configs:\n      enabled: true\n  observability:\n    metrics-server:\n      enabled: true\n\n## Qovery Common config\n# Past information from Qovery cluster console creation\n\nqovery:\n  clusterId: &clusterId "set-by-customer"\n  clusterShortId: &shortClusterId "set-by-customer"\n  organizationId: &organizationId "set-by-customer"\n  jwtToken: &jwtToken "set-by-customer"\n  domain: &domain "set-by-customer"\n  grpcServer: &grpcServer "set-by-customer"\n  engineGrpcServer: &engineGrpcServer "set-by-customer"\n  qoveryDnsUrl: &qoveryDnsUrl "set-by-customer"\n  lokiUrl: &lokiUrl "set-by-customer"\n  promtailLokiUrl: &promtailLokiUrl "set-by-customer"\n  acmeEmailAddr: &acmeEmailAddr "set-by-customer"\n  externalDnsPrefix: &externalDnsPrefix "set-by-customer"\n  architectures: &architectures "set-by-customer"\n\n## Chart overrides\n...\n')))),Object(o.b)("li",null,Object(o.b)("p",null,"Install Qovery on your Kubernetes cluster."),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-bash"}),"helm upgrade --install -n qovery -f values-demo.yaml qovery\n")),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("inlineCode",{parentName:"li"},"-n qovery"),": the namespace where Qovery and its dependencies will be installed"),Object(o.b)("li",{parentName:"ul"},Object(o.b)("inlineCode",{parentName:"li"},"-f values-demo.yaml"),": specify the values overrides file you want to use"),Object(o.b)("li",{parentName:"ul"},Object(o.b)("inlineCode",{parentName:"li"},"qovery"),": name of the chart to deploy"))))),Object(o.b)("h2",{id:"configuration"},"Configuration"),Object(o.b)("h3",{id:"qovery"},"Qovery"),Object(o.b)("p",null,"This is the configuration of Qovery itself. It is used by all Qovery components."),Object(o.b)("table",null,Object(o.b)("thead",{parentName:"table"},Object(o.b)("tr",{parentName:"thead"},Object(o.b)("th",Object(r.a)({parentName:"tr"},{align:null}),"Key"),Object(o.b)("th",Object(r.a)({parentName:"tr"},{align:null}),"Required"),Object(o.b)("th",Object(r.a)({parentName:"tr"},{align:null}),"Description"),Object(o.b)("th",Object(r.a)({parentName:"tr"},{align:null}),"Default"))),Object(o.b)("tbody",{parentName:"table"},Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),Object(o.b)("inlineCode",{parentName:"td"},"qovery.clusterId")),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"Yes"),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"The cluster ID. It is used to identify your cluster."),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),Object(o.b)("inlineCode",{parentName:"td"},"set-by-customer"))),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),Object(o.b)("inlineCode",{parentName:"td"},"qovery.shortClusterId")),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"Yes"),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"The short cluster ID. It is used to identify your cluster."),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),Object(o.b)("inlineCode",{parentName:"td"},"set-by-customer"))),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),Object(o.b)("inlineCode",{parentName:"td"},"qovery.organizationId")),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"Yes"),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"The organization ID. It is used to identify your organization."),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),Object(o.b)("inlineCode",{parentName:"td"},"set-by-customer"))),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),Object(o.b)("inlineCode",{parentName:"td"},"qovery.jwtToken")),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"Yes"),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"The JWT token. It is used to authenticate your cluster."),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),Object(o.b)("inlineCode",{parentName:"td"},"set-by-customer"))),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),Object(o.b)("inlineCode",{parentName:"td"},"qovery.domain")),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"Yes"),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"The domain name used by Qovery."),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),Object(o.b)("inlineCode",{parentName:"td"},"set-by-customer"))),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),Object(o.b)("inlineCode",{parentName:"td"},"qovery.qoveryDnsUrl")),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"Yes"),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"Qovery DNS url in case you want to use Qovery provided DNS"),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),Object(o.b)("inlineCode",{parentName:"td"},"set-by-customer"))),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),Object(o.b)("inlineCode",{parentName:"td"},"qovery.lokiUrl")),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"No"),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"Local Loki URL (required if Loki is set)"),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),Object(o.b)("inlineCode",{parentName:"td"},"set-by-customer"))),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),Object(o.b)("inlineCode",{parentName:"td"},"qovery.promtailLokiUrl")),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"No"),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"Promtail Loki URL (required if Promtail and Loki are set)"),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),Object(o.b)("inlineCode",{parentName:"td"},"set-by-customer"))),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),Object(o.b)("inlineCode",{parentName:"td"},"qovery.acmeEmailAddr")),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"No"),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"Email address used for ",Object(o.b)("inlineCode",{parentName:"td"},"Let's Encrypt")," TLS requests"),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),Object(o.b)("inlineCode",{parentName:"td"},"set-by-customer"))),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),Object(o.b)("inlineCode",{parentName:"td"},"qovery.externalDnsPrefix")),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"No"),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"ExernalDNS TXT record prefix (required if ExternalDNS is set)"),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),Object(o.b)("inlineCode",{parentName:"td"},"set-by-customer"))),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),Object(o.b)("inlineCode",{parentName:"td"},"qovery.architectures")),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"No"),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"Set cluster architectures (comma separated)"),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),Object(o.b)("inlineCode",{parentName:"td"},"AMD64"))))),Object(o.b)(i.a,{type:"danger",mdxType:"Alert"},Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Do not share the jwtToken! Keep it in a safe place.")," It is used to authenticate the cluster.")),Object(o.b)("h4",{id:"qovery-cluster-agent"},"Qovery Cluster Agent"),Object(o.b)(i.a,{type:"info",mdxType:"Alert"},Object(o.b)("p",null,"Optional. If you don't want to use the cluster agent, you can disable it. You will not be able to see your logs and metrics in the Qovery dashboard.")),Object(o.b)("p",null,"The cluster agent is responsible for securely forwarding logs and metrics from your Kubernetes cluster to Qovery control plane."),Object(o.b)("table",null,Object(o.b)("thead",{parentName:"table"},Object(o.b)("tr",{parentName:"thead"},Object(o.b)("th",Object(r.a)({parentName:"tr"},{align:null}),"Key"),Object(o.b)("th",Object(r.a)({parentName:"tr"},{align:null}),"Required"),Object(o.b)("th",Object(r.a)({parentName:"tr"},{align:null}),"Description"),Object(o.b)("th",Object(r.a)({parentName:"tr"},{align:null}),"Default"))),Object(o.b)("tbody",{parentName:"table"},Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),Object(o.b)("inlineCode",{parentName:"td"},"services.qovery-cluster-agent.environmentVariables.GRPC_SERVER")),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"Yes"),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"The gRPC server URL."),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),Object(o.b)("inlineCode",{parentName:"td"},"set-by-customer"))),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),Object(o.b)("inlineCode",{parentName:"td"},"services.qovery-cluster-agent.environmentVariables.CLUSTER_JWT_TOKEN")),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"Yes"),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"The JWT token."),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),Object(o.b)("inlineCode",{parentName:"td"},"set-by-customer"))),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),Object(o.b)("inlineCode",{parentName:"td"},"services.qovery-cluster-agent.environmentVariables.CLUSTER_ID")),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"Yes"),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"The cluster ID."),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),Object(o.b)("inlineCode",{parentName:"td"},"set-by-customer"))),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),Object(o.b)("inlineCode",{parentName:"td"},"services.qovery-cluster-agent.environmentVariables.ORGANIZATION_ID")),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"Yes"),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"The organization ID."),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),Object(o.b)("inlineCode",{parentName:"td"},"set-by-customer"))))),Object(o.b)("h4",{id:"qovery-shell-agent"},"Qovery Shell Agent"),Object(o.b)(i.a,{type:"info",mdxType:"Alert"},Object(o.b)("p",null,"Optional. If you don't want to use the shell agent, you can disable it. You will not be able to open a secure remote shell to your application.")),Object(o.b)("p",null,"The shell agent is responsible for giving you a secure remote shell access to your Kubernetes pods if you need it. E.g. when using ",Object(o.b)("inlineCode",{parentName:"p"},"qovery shell")," command."),Object(o.b)("table",null,Object(o.b)("thead",{parentName:"table"},Object(o.b)("tr",{parentName:"thead"},Object(o.b)("th",Object(r.a)({parentName:"tr"},{align:null}),"Key"),Object(o.b)("th",Object(r.a)({parentName:"tr"},{align:null}),"Required"),Object(o.b)("th",Object(r.a)({parentName:"tr"},{align:null}),"Description"),Object(o.b)("th",Object(r.a)({parentName:"tr"},{align:null}),"Default"))),Object(o.b)("tbody",{parentName:"table"},Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),Object(o.b)("inlineCode",{parentName:"td"},"services.qovery-shell-agent.environmentVariables.GRPC_SERVER")),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"Yes"),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"The gRPC server URL."),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),Object(o.b)("inlineCode",{parentName:"td"},"set-by-customer"))),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),Object(o.b)("inlineCode",{parentName:"td"},"services.qovery-shell-agent.environmentVariables.CLUSTER_JWT_TOKEN")),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"Yes"),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"The JWT token."),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),Object(o.b)("inlineCode",{parentName:"td"},"set-by-customer"))),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),Object(o.b)("inlineCode",{parentName:"td"},"services.qovery-shell-agent.environmentVariables.CLUSTER_ID")),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"Yes"),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"The cluster ID."),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),Object(o.b)("inlineCode",{parentName:"td"},"set-by-customer"))),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),Object(o.b)("inlineCode",{parentName:"td"},"services.qovery-shell-agent.environmentVariables.ORGANIZATION_ID")),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"Yes"),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"The organization ID."),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:null}),Object(o.b)("inlineCode",{parentName:"td"},"set-by-customer"))))),Object(o.b)("h3",{id:"ingress"},"Ingress"),Object(o.b)(i.a,{type:"info",mdxType:"Alert"},Object(o.b)("p",null,"Optional. To be able to expose web services privately or publicly, an Ingress is required. If you don't need it, you can disable the service.")),Object(o.b)("p",null,"Qovery uses ",Object(o.b)("a",Object(r.a)({parentName:"p"},{href:"https://docs.nginx.com/nginx-ingress-controller/"}),"NGINX Ingress Controller")," by default to route traffic to your applications."),Object(o.b)("h4",{id:"nginx-ingress-controller"},"Nginx Ingress Controller"),Object(o.b)("p",null,"Here is the minimum override configuration to be used:"),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-yaml"}),'ingress-nginx:\n  fullnameOverride: ingress-nginx\n  controller:\n    useComponentLabel: true\n    admissionWebhooks:\n      enabled: false\n    # Ingress class used when an application/container with public access is set\n    ingressClass: nginx-qovery\n    extraArgs:\n      # Default TLS certificate name and path\n      default-ssl-certificate: "qovery/letsencrypt-acme-qovery-cert"\n    # Allows customization of the source of the IP address or FQDN to report in the ingress status field\n    publishService:\n      enabled: true\n')),Object(o.b)("h4",{id:"other-ingress-controllers"},"Other Ingress Controllers"),Object(o.b)("p",null,"Qovery supports other Ingress Controllers. Please contact us if you want to use another one. We will be happy to help you."),Object(o.b)("h3",{id:"dns"},"DNS"),Object(o.b)(i.a,{type:"info",mdxType:"Alert"},Object(o.b)("p",null,"Optional but strongly recommended. Used to easily reach your applications with DNS records, even on private network.")),Object(o.b)("p",null,"Qovery uses ",Object(o.b)("a",Object(r.a)({parentName:"p"},{href:"https://github.com/kubernetes-sigs/external-dns"}),"External DNS")," to automatically configure DNS records for your applications."),Object(o.b)("p",null,"If you don't want or can't add your own DNS provider, you can use the Qovery DNS provider. It is a managed DNS provider by Qovery with a sub-domain given by Qovery for free.\nYou'll then be able to later add your custom DNS record (no matter the provider) to point to your Qovery DNS sub-domain."),Object(o.b)("h4",{id:"external-dns"},"External DNS"),Object(o.b)("p",null,"Here is one example with Qoery DNS provider:"),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-yaml"}),"external-dns:\n  fullnameOverride: external-dns\n  # set pdns for Qovery DNS managed (or you can use any supported provider by external-dns)\n  provider: pdns\n  # will use the domain name given by Qovery during the cluster setup phease\n  domainFilters: [*domain]\n  # an owner ID is set to avoid conflicts in case of multiple Qovery clusters\n  txtOwnerId: *shortClusterId\n  # a prefix to help Qovery to debug in case of issues\n  txtPrefix: *externalDnsPrefix\n  # set the Qovery DNS provider configuration\n  pdns:\n    apiUrl: *qoveryDnsUrl\n    apiKey: *jwtToken\n    apiPort: 443\n")),Object(o.b)("h3",{id:"logging"},"Logging"),Object(o.b)(i.a,{type:"info",mdxType:"Alert"},Object(o.b)("p",null,"Optional but strongly recommended. Promtail and Loki are not mandatory to use Qovery. However, it's required if you want to have log history and reduce Kubernetes API load.")),Object(o.b)("p",null,"Qovery uses ",Object(o.b)("a",Object(r.a)({parentName:"p"},{href:"https://grafana.com/oss/loki/"}),"Loki")," to store your logs and ",Object(o.b)("a",Object(r.a)({parentName:"p"},{href:"https://grafana.com/docs/loki/latest/clients/promtail/"}),"Promtail")," to collect your logs."),Object(o.b)("h4",{id:"loki"},"Loki"),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-yaml"}),"loki:\n  fullnameOverride: loki\n  loki:\n    # no auth is set for internal cluster usage\n    auth_enabled: false\n    ingester:\n      lifecycler:\n        ring:\n          kvstore:\n            # we store it in memory for the demo, you'll lose history once Loki restarts\n            store: inmemory\n          replication_factor: 1\n    schema_config:\n      configs:\n        - from: 2020-05-15\n          store: boltdb-shipper\n          object_store: filesystem\n          schema: v11\n          index:\n            prefix: index_\n            period: 24h\n  monitoring:\n    # all the monitoring part is disabled to reduce resource footprint for the demo usage\n    dashboards:\n      enabled: false\n    rules:\n      enabled: false\n    serviceMonitor:\n      enabled: false\n      metricsInstance:\n        enabled: false\n    selfMonitoring:\n      enabled: false\n      grafanaAgent:\n        installOperator: false\n    grafanaAgent:\n      enabled: false\n    lokiCanary:\n      enabled: false\n  test:\n    enabled: false\n  gateway:\n    enabled: false\n  # we use a single binary to reduce resource footprint for the demo usage\n  singleBinary:\n    replicas: 1\n    persistence:\n      enabled: false\n    extraVolumes:\n      - name: data\n        emptyDir: {}\n      - name: storage\n        emptyDir: {}\n    extraVolumeMounts:\n      - name: data\n        mountPath: /data\n      - name: storage\n        mountPath: /var/loki\n")),Object(o.b)("h4",{id:"promtail"},"Promtail"),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-yaml"}),"promtail:\n  fullnameOverride: promtail\n  # promtail requires to be spawned in kube-system namespace\n  namespace: kube-system\n  priorityClassName: system-node-critical\n  config:\n    clients:\n      # forward logs to Loki\n      - url: *promtailLokiUrl\n    snippets:\n      extraRelabelConfigs:\n        - action: labelmap\n          # required to be able to watch logs from Qovery console interface\n          regex: __meta_kubernetes_pod_label_(qovery_com_service_id|qovery_com_service_type|qovery_com_environment_id)\n")),Object(o.b)("h3",{id:"certificates"},"Certificates"),Object(o.b)(i.a,{type:"info",mdxType:"Alert"},Object(o.b)("p",null,"Optional but strongly recommended. Cert-manager helps you to get TLS certificates through Let's Encrypt. Without it, you will not be able to automatically get TLS certificates.")),Object(o.b)("p",null,"Qovery uses ",Object(o.b)("a",Object(r.a)({parentName:"p"},{href:"https://cert-manager.io/"}),"Cert Manager")," to automatically get TLS certificates for your applications."),Object(o.b)("h4",{id:"cert-manager"},"Cert Manager"),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-yaml"}),"cert-manager:\n  fullnameOverride: cert-manager\n  # CRD are required\n  installCRDs: true\n  replicaCount: 1\n  startupapicheck:\n    jobAnnotations:\n      helm.sh/hook: post-install,post-upgrade\n    rbac:\n      annotations:\n        helm.sh/hook: post-install,post-upgrade\n    serviceAccount:\n      annotations:\n        helm.sh/hook: post-install,post-upgrade\n")),Object(o.b)("h4",{id:"qovery-cert-manager-webhook"},"Qovery Cert Manager Webhook"),Object(o.b)(i.a,{type:"info",mdxType:"Alert"},Object(o.b)("p",null,"Optional and only required if you're using Qovery DNS provider. Set this to get automatic TLS certificates by Qovery.")),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-yaml"}),"qovery-cert-manager-webhook:\n  fullnameOverride: qovery-cert-manager-webhook\n  certManager:\n    namespace: qovery\n    serviceAccountName: cert-manager\n  secret:\n    apiUrl: *qoveryDnsUrl\n    apiKey: *jwtToken\n")),Object(o.b)("h4",{id:"cert-manager-configs"},"Cert Manager Configs"),Object(o.b)("p",null,"This is the configuration of Cert Manager itself. It is used by all Cert Manager components."),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-yaml"}),"cert-manager-configs:\n  fullnameOverride: cert-manager-configs\n  # set pdns to use Qovery DNS provider\n  externalDnsProvider: pdns\n  managedDns: [*domain]\n  acme:\n    letsEncrypt:\n      emailReport: *acmeEmailAddr\n      # As it's a demo cluster, we use the staging environment to avoid rate limit issues\n      acmeUrl: https://acme-staging-v02.api.letsencrypt.org/directory\n  provider:\n    # set the provider of your choice or use the Qovery DNS provider\n    pdns:\n      apiPort: 443\n      apiUrl: *qoveryDnsUrl\n      apiKey: *jwtToken\n")),Object(o.b)("p",null,"Qovery uses ",Object(o.b)("a",Object(r.a)({parentName:"p"},{href:"https://github.com/kubernetes-sigs/metrics-server"}),"Metrics Server")," to collect metrics from your Kubernetes cluster and scale your applications automatically based on custom metrics."),Object(o.b)("h2",{id:"observability"},"Observability"),Object(o.b)("h3",{id:"metrics-server"},"Metrics Server"),Object(o.b)(i.a,{type:"info",mdxType:"Alert"},Object(o.b)("p",null,"Optional but strongly recommended. Without metrics server, you will not be able to scale your applications automatically and will not have metrics information in the Qovery dashboard.")),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-yaml"}),"metrics-server:\n  fullnameOverride: metrics-server\n  defaultArgs:\n    - --cert-dir=/tmp\n    - --kubelet-preferred-address-types=InternalIP,ExternalIP,Hostname\n    - --kubelet-use-node-status-port\n    - --metric-resolution=15s\n    - --kubelet-insecure-tls\n  apiService:\n    create: false\n")),Object(o.b)("h2",{id:"faq"},"FAQ"),Object(o.b)("h3",{id:"i-have-a-non-covered-use-case-what-should-i-do"},"I have a non-covered use case. What should I do?"),Object(o.b)("p",null,"Please ",Object(o.b)("a",Object(r.a)({parentName:"p"},{href:"https://www.qovery.com/contact"}),"contact us"),". We will be happy to help you."),Object(o.b)("h3",{id:"can-i-host-the-qovery-control-plane-on-my-own"},"Can I host the Qovery control plane on my own?"),Object(o.b)("p",null,"At the momement, you can't. But please ",Object(o.b)("a",Object(r.a)({parentName:"p"},{href:"https://www.qovery.com/contact"}),"contact us")," to discuss about it. We will be happy to help you."))}d.isMDXComponent=!0},420:function(e,t,n){var r;!function(){"use strict";var n={}.hasOwnProperty;function a(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var o=typeof r;if("string"===o||"number"===o)e.push(r);else if(Array.isArray(r)&&r.length){var l=a.apply(null,r);l&&e.push(l)}else if("object"===o)for(var i in r)n.call(r,i)&&r[i]&&e.push(i)}}return e.join(" ")}e.exports?(a.default=a,e.exports=a):void 0===(r=function(){return a}.apply(t,[]))||(e.exports=r)}()},421:function(e,t,n){"use strict";n(423);var r=n(0),a=n.n(r),o=n(420),l=n.n(o);n(132);t.a=function(e){var t=e.children,n=e.classNames,r=e.fill,o=e.icon,i=e.type,c=null;switch(i){case"danger":c="alert-triangle";break;case"success":c="check-circle";break;case"warning":c="alert-triangle";break;default:c="info"}return a.a.createElement("div",{className:l()(n,"alert","alert--"+i,{"alert--fill":r,"alert--icon":!1!==o}),role:"alert"},!1!==o&&a.a.createElement("i",{className:l()("feather","icon-"+(o||c))}),t)}},422:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return m}));var r=n(0),a=n.n(r);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var b=a.a.createContext({}),s=function(e){var t=a.a.useContext(b),n=t;return e&&(n="function"==typeof e?e(t):i({},t,{},e)),n},u=function(e){var t=s(e.components);return a.a.createElement(b.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},p=Object(r.forwardRef)((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,b=c(e,["components","mdxType","originalType","parentName"]),u=s(n),p=r,m=u["".concat(l,".").concat(p)]||u[p]||d[p]||o;return n?a.a.createElement(m,i({ref:t},b,{components:n})):a.a.createElement(m,i({ref:t},b))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,l=new Array(o);l[0]=p;var i={};for(var c in t)hasOwnProperty.call(t,c)&&(i[c]=t[c]);i.originalType=e,i.mdxType="string"==typeof e?e:r,l[1]=i;for(var b=2;b<o;b++)l[b]=n[b];return a.a.createElement.apply(null,l)}return a.a.createElement.apply(null,n)}p.displayName="MDXCreateElement"},423:function(e,t,n){var r=n(12);r(r.P,"Array",{fill:n(424)}),n(74)("fill")},424:function(e,t,n){"use strict";var r=n(27),a=n(75),o=n(26);e.exports=function(e){for(var t=r(this),n=o(t.length),l=arguments.length,i=a(l>1?arguments[1]:void 0,n),c=l>2?arguments[2]:void 0,b=void 0===c?n:a(c,n);b>i;)t[i++]=e;return t}},425:function(e,t,n){var r=n(28).f,a=Function.prototype,o=/^\s*function ([^ (]*)/;"name"in a||n(10)&&r(a,"name",{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(e){return""}}})},426:function(e,t,n){"use strict";n(425);var r=n(0),a=n.n(r),o=n(421);t.a=function(e){var t=e.children,n=e.name;return a.a.createElement(o.a,{type:"info",fill:!0,icon:!1,rounded:!0,className:"list--icons list--icons--arrow list--tight list--indent margin-bottom--lg"},a.a.createElement("p",{class:"text--lg margin-bottom--sm",style:{marginTop:"-0.25em"}},"Before you begin, this ",n||"page"," assumes the following:"),t)}},428:function(e,t,n){"use strict";var r=n(432),a=n(51);function o(e,t){return t.encode?t.strict?r(e):encodeURIComponent(e):e}t.extract=function(e){return e.split("?")[1]||""},t.parse=function(e,t){var n=function(e){var t;switch(e.arrayFormat){case"index":return function(e,n,r){t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===r[e]&&(r[e]={}),r[e][t[1]]=n):r[e]=n};case"bracket":return function(e,n,r){t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==r[e]?r[e]=[].concat(r[e],n):r[e]=[n]:r[e]=n};default:return function(e,t,n){void 0!==n[e]?n[e]=[].concat(n[e],t):n[e]=t}}}(t=a({arrayFormat:"none"},t)),r=Object.create(null);return"string"!=typeof e?r:(e=e.trim().replace(/^(\?|#|&)/,""))?(e.split("&").forEach((function(e){var t=e.replace(/\+/g," ").split("="),a=t.shift(),o=t.length>0?t.join("="):void 0;o=void 0===o?null:decodeURIComponent(o),n(decodeURIComponent(a),o,r)})),Object.keys(r).sort().reduce((function(e,t){var n=r[t];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?e[t]=function e(t){return Array.isArray(t)?t.sort():"object"==typeof t?e(Object.keys(t)).sort((function(e,t){return Number(e)-Number(t)})).map((function(e){return t[e]})):t}(n):e[t]=n,e}),Object.create(null))):r},t.stringify=function(e,t){var n=function(e){switch(e.arrayFormat){case"index":return function(t,n,r){return null===n?[o(t,e),"[",r,"]"].join(""):[o(t,e),"[",o(r,e),"]=",o(n,e)].join("")};case"bracket":return function(t,n){return null===n?o(t,e):[o(t,e),"[]=",o(n,e)].join("")};default:return function(t,n){return null===n?o(t,e):[o(t,e),"=",o(n,e)].join("")}}}(t=a({encode:!0,strict:!0,arrayFormat:"none"},t));return e?Object.keys(e).sort().map((function(r){var a=e[r];if(void 0===a)return"";if(null===a)return o(r,t);if(Array.isArray(a)){var l=[];return a.slice().forEach((function(e){void 0!==e&&l.push(n(r,e,l.length))})),l.join("&")}return o(r,t)+"="+o(a,t)})).filter((function(e){return e.length>0})).join("&"):""}},431:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=(n(420),n(428)),l=n.n(o);n(134);t.a=function(e){var t=e.children,n=e.headingDepth,o=e.hideFeedbackQuestion,i="undefined"!=typeof window?window.location:null,c={title:"Tutorial on "+i+" failed",body:"The tutorial on:\n\n"+i+"\n\nHere's what went wrong:\n\n\x3c!-- Insert command output and details. Thank you for reporting! :) --\x3e"},b="https://github.com/qovery/documentation/issues/new?"+l.a.stringify(c),s=Object(r.useState)(null),u=s[0],d=s[1];return a.a.createElement("div",{className:"steps steps--h"+n},t,!o&&!u&&a.a.createElement("div",{className:"steps--feedback"},"How was it? Did this tutorial work?\xa0\xa0",a.a.createElement("span",{className:"button button--sm button--primary",onClick:function(){return d("yes")}},"Yes"),"\xa0\xa0",a.a.createElement("a",{href:b,target:"_blank",className:"button button--sm button--primary"},"No")),"yes"==u&&a.a.createElement("div",{className:"steps--feedback steps--feedback--success"},"Thanks! If you're enjoying Qovery please consider ",a.a.createElement("a",{href:"https://github.com/qovery/documentation/",target:"_blank"},"starring our Github repo"),"."))}},432:function(e,t,n){"use strict";e.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}}}]);