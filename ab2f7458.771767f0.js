/*! For license information please see ab2f7458.771767f0.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[199],{351:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return c})),n.d(t,"metadata",(function(){return s})),n.d(t,"rightToc",(function(){return u})),n.d(t,"default",(function(){return p}));var r=n(1),a=n(9),o=(n(0),n(463)),i=(n(470),n(467),n(462)),c={last_modified_on:"2024-09-27",$schema:"/.meta/.schemas/guides.json",title:"Enable multi-region backup on your RDS instances with AWS Backup",description:"Learn how to enable the multi-region backup on your RDS instance (PostgreSQL, MySQL) via the AWS Backup feature",author_github:"https://github.com/acarranoqovery",tags:["type: guide","database: rds"]},s={categories:[{name:"advanced",title:"Advanced",description:"Go beyond the basics, become a Qovery pro, and extract the full potential of Qovery.",permalink:"/guides/advanced"}],coverLabel:"Enable multi-region backup on your RDS instances with AWS Backup",description:"Learn how to enable the multi-region backup on your RDS instance (PostgreSQL, MySQL) via the AWS Backup feature",permalink:"/guides/advanced/adding-multi-region-backup-rds",readingTime:"3 min read",source:"@site/guides/advanced/adding-multi-region-backup-rds.md",tags:[{label:"type: guide",permalink:"/guides/tags/type-guide"},{label:"database: rds",permalink:"/guides/tags/database-rds"}],title:"Enable multi-region backup on your RDS instances with AWS Backup",truncated:!1,prevItem:{title:"Deploy Temporal on Kubernetes",permalink:"/guides/tutorial/deploy-temporal-on-kubernetes"},nextItem:{title:"Getting Started with Preview Environments on AWS",permalink:"/guides/tutorial/getting-started-with-preview-environments-on-aws-for-beginners"}},u=[{value:"1. Create an AWS Backup Plan",id:"1-create-an-aws-backup-plan",children:[]},{value:"2. Assign resources",id:"2-assign-resources",children:[]}],l={rightToc:u};function p(e){var t=e.components,n=Object(a.a)(e,["components"]);return Object(o.b)("wrapper",Object(r.a)({},l,n,{components:t,mdxType:"MDXLayout"}),Object(o.b)("p",null,"Managed RDS instances deployed with Qovery have by default a backup option enabled on the same region where the RDS instance is located. However, for enhanced disaster recovery and compliance purposes, you may need to set up multi-region backups.\nThis guide will help you configure an AWS Backup job to create additional backups of your RDS instances in a different region. Multi-region backups provide several benefits:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Improved disaster recovery: If one AWS region becomes unavailable, you can restore your database from a backup in another region."),Object(o.b)("li",{parentName:"ul"},"Compliance: Some regulations require data to be backed up in geographically distinct locations."),Object(o.b)("li",{parentName:"ul"},"Data migration: Multi-region backups can facilitate moving your database to a different region if needed.")),Object(o.b)("p",null,"For more information about AWS Backup, have a look at ",Object(o.b)("a",Object(r.a)({parentName:"p"},{href:"https://docs.aws.amazon.com/aws-backup/latest/devguide/whatisbackup.html"}),"this documentation"),"."),Object(o.b)(i.a,{type:"warning",mdxType:"Alert"},"Cost Considerations: Setting up multi-region backups will incur additional costs. These costs include: 1) Storage costs for the backup data in the secondary region 2) Data transfer costs for copying the backup data between regions 3) Potential costs for restoring from a backup in a different region Be sure to review the AWS Backup pricing and AWS data transfer pricing to estimate the costs for your specific use case. You can use AWS Cost Explorer to monitor these costs over time."),Object(o.b)("h1",{id:"how-to-configure"},"How to configure"),Object(o.b)("p",null,"Make sure you have already your Managed Database (RDS PostgreSQL or MySQL) deployed with Qovery"),Object(o.b)("h2",{id:"1-create-an-aws-backup-plan"},"1. Create an AWS Backup Plan"),Object(o.b)("p",null,"Go to the AWS Console and follow ",Object(o.b)("a",Object(r.a)({parentName:"p"},{href:"https://docs.aws.amazon.com/aws-backup/latest/devguide/creating-a-backup-plan.html#create-backup-plan-console"}),"this guide")," to create your AWS Backup plan. For the setup, you can use the default settings but take into account the following points:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("strong",{parentName:"li"},"Vault"),": you can use the default vault as long as you don't have any additional security requirement (share snapshots externally etc.)"),Object(o.b)("li",{parentName:"ul"},Object(o.b)("strong",{parentName:"li"},"Start time"),": update the start time based on your needs"),Object(o.b)("li",{parentName:"ul"},Object(o.b)("strong",{parentName:"li"},"Total retention period"),": update the retention period for the snapshots based on your needs"),Object(o.b)("li",{parentName:"ul"},Object(o.b)("strong",{parentName:"li"},"Copy to destination"),": at this step, select the region where you want to create the database snapshot")),Object(o.b)("p",null,"Press ",Object(o.b)("strong",{parentName:"p"},"Create Plan")),Object(o.b)("h2",{id:"2-assign-resources"},"2. Assign resources"),Object(o.b)("p",null,"On the next step, we will define the resource that this backup job should target:"),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},'Select the option "Include specific resource types"'),Object(o.b)("li",{parentName:"ol"},'In the dropdown list for "Select specific resource types", select "RDS"'),Object(o.b)("li",{parentName:"ol"},'(Optional) if you don\'t want this plan to run on every RDS instance, uncheck the option "All databases" and select the databases from the dropdown list'),Object(o.b)("li",{parentName:"ol"},'Press "Assign Resources"')),Object(o.b)("h1",{id:"checking-the-new-backups"},"Checking the new backups"),Object(o.b)("p",null,"Now, based on your schedule, you should see backup jobs starting and creating backups in the selected vault:"),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},"Select the region where the backup should be created"),Object(o.b)("li",{parentName:"ol"},'Open the "Vault" section on the right'),Object(o.b)("li",{parentName:"ol"},"Select the vault that the AWS backup job should target"),Object(o.b)("li",{parentName:"ol"},'Verify that new "Recovery points" have been created ')),Object(o.b)("p",{align:"center"},Object(o.b)("img",{src:"/img/multi-region-backup/vault-backup.png",alt:"Vault Backup location"})),Object(o.b)("p",null,"From this page you can restore a backup (refer to the AWS documentation for more information)."))}p.isMDXComponent=!0},461:function(e,t,n){var r;!function(){"use strict";var n={}.hasOwnProperty;function a(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var o=typeof r;if("string"===o||"number"===o)e.push(r);else if(Array.isArray(r)&&r.length){var i=a.apply(null,r);i&&e.push(i)}else if("object"===o)for(var c in r)n.call(r,c)&&r[c]&&e.push(c)}}return e.join(" ")}e.exports?(a.default=a,e.exports=a):void 0===(r=function(){return a}.apply(t,[]))||(e.exports=r)}()},462:function(e,t,n){"use strict";n(464);var r=n(0),a=n.n(r),o=n(461),i=n.n(o);n(132);t.a=function(e){var t=e.children,n=e.classNames,r=e.fill,o=e.icon,c=e.type,s=null;switch(c){case"danger":s="alert-triangle";break;case"success":s="check-circle";break;case"warning":s="alert-triangle";break;default:s="info"}return a.a.createElement("div",{className:i()(n,"alert","alert--"+c,{"alert--fill":r,"alert--icon":!1!==o}),role:"alert"},!1!==o&&a.a.createElement("i",{className:i()("feather","icon-"+(o||s))}),t)}},463:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return f}));var r=n(0),a=n.n(r);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var u=a.a.createContext({}),l=function(e){var t=a.a.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):c({},t,{},e)),n},p=function(e){var t=l(e.components);return a.a.createElement(u.Provider,{value:t},e.children)},b={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},d=Object(r.forwardRef)((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,i=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),p=l(n),d=r,f=p["".concat(i,".").concat(d)]||p[d]||b[d]||o;return n?a.a.createElement(f,c({ref:t},u,{components:n})):a.a.createElement(f,c({ref:t},u))}));function f(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=d;var c={};for(var s in t)hasOwnProperty.call(t,s)&&(c[s]=t[s]);c.originalType=e,c.mdxType="string"==typeof e?e:r,i[1]=c;for(var u=2;u<o;u++)i[u]=n[u];return a.a.createElement.apply(null,i)}return a.a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},464:function(e,t,n){var r=n(12);r(r.P,"Array",{fill:n(465)}),n(74)("fill")},465:function(e,t,n){"use strict";var r=n(27),a=n(75),o=n(26);e.exports=function(e){for(var t=r(this),n=o(t.length),i=arguments.length,c=a(i>1?arguments[1]:void 0,n),s=i>2?arguments[2]:void 0,u=void 0===s?n:a(s,n);u>c;)t[c++]=e;return t}},466:function(e,t,n){var r=n(28).f,a=Function.prototype,o=/^\s*function ([^ (]*)/;"name"in a||n(10)&&r(a,"name",{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(e){return""}}})},467:function(e,t,n){"use strict";n(466);var r=n(0),a=n.n(r),o=n(462);t.a=function(e){var t=e.children,n=e.name;return a.a.createElement(o.a,{type:"info",fill:!0,icon:!1,rounded:!0,className:"list--icons list--icons--arrow list--tight list--indent margin-bottom--lg"},a.a.createElement("p",{class:"text--lg margin-bottom--sm",style:{marginTop:"-0.25em"}},"Before you begin, this ",n||"page"," assumes the following:"),t)}},469:function(e,t,n){"use strict";var r=n(473),a=n(51);function o(e,t){return t.encode?t.strict?r(e):encodeURIComponent(e):e}t.extract=function(e){return e.split("?")[1]||""},t.parse=function(e,t){var n=function(e){var t;switch(e.arrayFormat){case"index":return function(e,n,r){t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===r[e]&&(r[e]={}),r[e][t[1]]=n):r[e]=n};case"bracket":return function(e,n,r){t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==r[e]?r[e]=[].concat(r[e],n):r[e]=[n]:r[e]=n};default:return function(e,t,n){void 0!==n[e]?n[e]=[].concat(n[e],t):n[e]=t}}}(t=a({arrayFormat:"none"},t)),r=Object.create(null);return"string"!=typeof e?r:(e=e.trim().replace(/^(\?|#|&)/,""))?(e.split("&").forEach((function(e){var t=e.replace(/\+/g," ").split("="),a=t.shift(),o=t.length>0?t.join("="):void 0;o=void 0===o?null:decodeURIComponent(o),n(decodeURIComponent(a),o,r)})),Object.keys(r).sort().reduce((function(e,t){var n=r[t];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?e[t]=function e(t){return Array.isArray(t)?t.sort():"object"==typeof t?e(Object.keys(t)).sort((function(e,t){return Number(e)-Number(t)})).map((function(e){return t[e]})):t}(n):e[t]=n,e}),Object.create(null))):r},t.stringify=function(e,t){var n=function(e){switch(e.arrayFormat){case"index":return function(t,n,r){return null===n?[o(t,e),"[",r,"]"].join(""):[o(t,e),"[",o(r,e),"]=",o(n,e)].join("")};case"bracket":return function(t,n){return null===n?o(t,e):[o(t,e),"[]=",o(n,e)].join("")};default:return function(t,n){return null===n?o(t,e):[o(t,e),"=",o(n,e)].join("")}}}(t=a({encode:!0,strict:!0,arrayFormat:"none"},t));return e?Object.keys(e).sort().map((function(r){var a=e[r];if(void 0===a)return"";if(null===a)return o(r,t);if(Array.isArray(a)){var i=[];return a.slice().forEach((function(e){void 0!==e&&i.push(n(r,e,i.length))})),i.join("&")}return o(r,t)+"="+o(a,t)})).filter((function(e){return e.length>0})).join("&"):""}},470:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=(n(461),n(469)),i=n.n(o);n(133);t.a=function(e){var t=e.children,n=e.headingDepth,o=e.hideFeedbackQuestion,c="undefined"!=typeof window?window.location:null,s={title:"Tutorial on "+c+" failed",body:"The tutorial on:\n\n"+c+"\n\nHere's what went wrong:\n\n\x3c!-- Insert command output and details. Thank you for reporting! :) --\x3e"},u="https://github.com/qovery/documentation/issues/new?"+i.a.stringify(s),l=Object(r.useState)(null),p=l[0],b=l[1];return a.a.createElement("div",{className:"steps steps--h"+n},t,!o&&!p&&a.a.createElement("div",{className:"steps--feedback"},"How was it? Did this tutorial work?\xa0\xa0",a.a.createElement("span",{className:"button button--sm button--primary",onClick:function(){return b("yes")}},"Yes"),"\xa0\xa0",a.a.createElement("a",{href:u,target:"_blank",className:"button button--sm button--primary"},"No")),"yes"==p&&a.a.createElement("div",{className:"steps--feedback steps--feedback--success"},"Thanks! If you're enjoying Qovery please consider ",a.a.createElement("a",{href:"https://github.com/qovery/documentation/",target:"_blank"},"starring our Github repo"),"."))}},473:function(e,t,n){"use strict";e.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}}}]);