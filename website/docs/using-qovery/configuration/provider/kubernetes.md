---
last_modified_on: "2023-11-29"
title: "Kubernetes"
description: "Learn how to install and configure Qovery on your own Kubernetes cluster (BYOK) / Self-managed Kubernetes cluster"
---

import Steps from '@site/src/components/Steps';
import Alert from '@site/src/components/Alert';
import Assumptions from '@site/src/components/Assumptions';

<Alert type="warning">

Installing Qovery on your Kubernetes cluster is currently in beta. [You need to request your access here](https://www.qovery.com/solutions/bring-your-own-kubernetes).

</Alert>

<Alert type="info">

This section is for Kubernetes users. If you are not familiar with Kubernetes, we recommend you to use Qovery on a Managed Kubernetes cluster on [AWS][docs.using-qovery.configuration.cloud-service-provider.amazon-web-services], [GCP][docs.using-qovery.configuration.cloud-service-provider.google-cloud-platform], [Scaleway][docs.using-qovery.configuration.cloud-service-provider.microsoft-azure], or contact us.

</Alert>

Qovery BYOK (Bring Your Own Kubernetes) is a self-hosted version of Qovery. It allows you to install Qovery on your own Kubernetes cluster. Read [this article](https://www.qovery.com/blog/kubernetes-managed-by-qovery-vs-self-managed-byok) to better understand the difference with the Managed Kubernetes by Qovery. In a nutshell, Qovery BYOK is for Kubernetes experts who want to manage their own Kubernetes cluster. Qovery does not manage the Kubernetes cluster for you.

<p align="center">
  <img src="/img/qovery_byok_how_it_works.jpg" alt="How Qovery works with Self Managed Kubernetes cluster" />
</p>

This page explains how to install and configure Qovery on your Kubernetes cluster. If you are looking for a quick step-by-step guide, please follow the [Kubernetes guide][guides.provider.guide-kubernetes].

<!--
     THIS FILE IS AUTOGENERATED!

     To make changes please edit the template located at:

     website/docs/using-qovery/configuration/provider/kubernetes.md.erb
-->

## What's the requirements?

Qovery requires a Kubernetes cluster with the following requirements:

- Kubernetes version 1.24 or higher
- Helm version 3.0 or higher
- 2 CPU
- 4 GB RAM
- 10 GB disk space
- Being able to access to the Internet on the following endpoints:
  - `https://grpc.qovery.com`
  - `https://api.qovery.com`
  - `https://ddns.qovery.com`

## Install Qovery

<Steps headingDepth={3}>

<ol>

<li>

Install [Helm][urls.helm] command line tool.

</li>

<li>

Add Qovery Helm repository.

```bash
helm repo add datadog https://helm.datadoghq.com
helm repo update
```

</li>

<li>

Change your values in the `values.yaml` file.

<details><summary>values-example.yaml</summary>

```yaml
# this is an example of values.yaml file
# please change the values according to your needs (cf doc below)
services:
  qovery-cluster-agent:
    enabled: false
  qovery-shell-agent:
    enabled: false
  qovery-engine:
    enabled: false
  ingress:
    ingress-nginx:
      enabled: true
  dns:
    external-dns:
      enabled: true
  logging:
    loki:
      enabled: true
    promtail:
      enabled: true
  certificates:
    cert-manager:
      enabled: true
    qovery-cert-manager-webhook:
      enabled: true
    cert-manager-configs:
      enabled: false
  aws:
    q-storageclass:
      enabled: false
  observability:
    metrics-server:
      enabled: true

## Qovery Common config

qovery:
  clusterId: set-by-customer
  shortClusterId: set-by-customer
  apkKey: set-by-customer
  jwtToken: set-by-customer
  domain: set-by-customer
  qoveryDnsUrl: https://ddns.qovery.com
  qoveryDnsApiKey: set-by-customer

## Chart Overrides

qovery-cluster-agent:
  image:
    tag: set-by-customer
  environmentVariables:
    GRPC_SERVER: set-by-customer
    CLUSTER_JWT_TOKEN: set-by-customer
    CLUSTER_ID: set-by-customer
    ORGANIZATION_ID: set-by-customer

ingress-nginx:
  fullnameOverride: ingress-nginx
  controller:
    useComponentLabel: true
    admissionWebhooks:
      enabled: false
    ingressClass: nginx-qovery
    extraArgs:
      default-ssl-certificate: "cert-manager/letsencrypt-acme-qovery-cert"
    publishService:
      enabled: true

external-dns:
  fullnameOverride: external-dns
  provider: pdns
  domainFilters: ["{{ tpl .Values.qovery.domain }}"]
  txtOwnerId: "{{ tpl .Values.qovery.shortClusterId }}"
  txtPrefix: "{{ tpl .Values.qovery.shortClusterId }}" # update with the exact used one on our side
  pdns:
    apiUrl: "{{ tpl .Values.qovery.qoveryDnsUrl }}"
    apiKey: "{{ tpl .Values.qovery.qoveryDnsApiKey }}"
    apiPort: 443

loki:
  fullnameOverride: loki
  loki:
    auth_enabled: false
    ingester:
      lifecycler:
        ring:
          kvstore:
            store: inmemory
          replication_factor: 1
    schema_config:
      configs:
        - from: 2020-05-15
          store: boltdb-shipper
          object_store: filesystem
          schema: v11
          index:
            prefix: index_
            period: 24h
  monitoring:
    dashboards:
      enabled: false
    rules:
      enabled: false
    serviceMonitor:
      enabled: false
      metricsInstance:
        enabled: false
    selfMonitoring:
      enabled: false
      grafanaAgent:
        installOperator: false
    grafanaAgent:
      enabled: false
    lokiCanary:
      enabled: false
  test:
    enabled: false
  gateway:
    enabled: false
  singleBinary:
    replicas: 1
    persistence:
      enabled: false
    extraVolumes:
      - name: data
        emptyDir: {}
      - name: storage
        emptyDir: {}
    extraVolumeMounts:
      - name: data
        mountPath: /data
      - name: storage
        mountPath: /var/loki

promtail:
  fullnameOverride: promtail
  namespace: kube-system
  priorityClassName: system-node-critical
  config:
    clients:
      - url: http://loki.qovery.svc:3100/loki/api/v1/push
    snippets:
      extraRelabelConfigs:
        - action: labelmap
          regex: __meta_kubernetes_pod_label_(qovery_com_service_id|qovery_com_service_type|qovery_com_environment_id)

cert-manager:
  namespace: cert-manager
  fullnameOverride: cert-manager
  installCRDs: true
  replicaCount: 1
  startupapicheck:
    jobAnnotations:
      helm.sh/hook: post-install,post-upgrade
    rbac:
      annotations:
        helm.sh/hook: post-install,post-upgrade
    serviceAccount:
      annotations:
        helm.sh/hook: post-install,post-upgrade

qovery-cert-manager-webhook:
  fullnameOverride: qovery-cert-manager-webhook
  certManager:
    namespace: cert-manager
    serviceAccountName: cert-manager
  secret:
    apiUrl: "{{ tpl .Values.qovery.qoveryDnsUrl }}"
    apiKey: "{{ tpl .Values.qovery.qoveryDnsApiKey }}"

cert-manager-configs:
  fullnameOverride: cert-manager-configs
  externalDnsProvider: set-by-customer
  managedDns: ["{{ tpl .Values.qovery.domain }}"]

  acme:
    letsEncrypt:
      emailReport: set-by-customer
      acmeUrl: set-by-customer

  provider:
    cloudflare:
      apiToken: set-by-customer
      email: set-by-customer
    pdns:
      apiPort: set-by-customer
      apiUrl: set-by-customer
      apiKey: set-by-customer

metrics-server:
  fullnameOverride: metrics-server
  apiService:
    create: false
```

</details>

</li>

<li>

Install Qovery on your Kubernetes cluster.

```bash
helm install qovery
```

</li>

</ol>

</Steps>


[docs.using-qovery.configuration.cloud-service-provider.amazon-web-services]: /docs/using-qovery/configuration/cloud-service-provider/amazon-web-services/
[docs.using-qovery.configuration.cloud-service-provider.google-cloud-platform]: /docs/using-qovery/configuration/cloud-service-provider/google-cloud-platform/
[docs.using-qovery.configuration.cloud-service-provider.microsoft-azure]: /docs/using-qovery/configuration/cloud-service-provider/microsoft-azure/
[guides.provider.guide-kubernetes]: /guides/provider/guide-kubernetes/
[urls.helm]: https://helm.sh
