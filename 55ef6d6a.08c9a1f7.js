/*! For license information please see 55ef6d6a.08c9a1f7.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[110],{261:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return c})),n.d(t,"metadata",(function(){return s})),n.d(t,"rightToc",(function(){return p})),n.d(t,"default",(function(){return u}));var a=n(1),r=n(9),i=(n(0),n(448)),o=(n(453),n(447)),l=n(452),c={last_modified_on:"2023-02-09",title:"Deployment Pipeline",description:"Learn how to the Environment Deployment Pipeline works"},s={id:"using-qovery/deployment/deployment-pipeline",title:"Deployment Pipeline",description:"Learn how to the Environment Deployment Pipeline works",source:"@site/docs/using-qovery/deployment/deployment-pipeline.md",permalink:"/docs/using-qovery/deployment/deployment-pipeline",sidebar:"docs",previous:{title:"Running and Deployment Statuses",permalink:"/docs/using-qovery/deployment/running-and-deployment-statuses"},next:{title:"Languages",permalink:"/docs/using-qovery/languages"}},p=[{value:"Default Pipeline",id:"default-pipeline",children:[]},{value:"Modify the Pipeline",id:"modify-the-pipeline",children:[{value:"Add a stage",id:"add-a-stage",children:[]},{value:"Modify a stage",id:"modify-a-stage",children:[]},{value:"Delete a stage",id:"delete-a-stage",children:[]},{value:"Change stage for a service",id:"change-stage-for-a-service",children:[]}]}],d={rightToc:p};function u(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(i.b)("wrapper",Object(a.a)({},d,n,{components:t,mdxType:"MDXLayout"}),Object(i.b)(l.a,{name:"documentation",mdxType:"Assumptions"},Object(i.b)("p",null,"You have created an ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"/docs/using-qovery/configuration/environment/"}),"Environment")," and one Service (application, db or job)")),Object(i.b)("p",null,"When the deployment of an environment is triggered, Qovery executes what we call ",Object(i.b)("inlineCode",{parentName:"p"},"Deployment Pipeline"),". It basically defines which operation shall be performed to properly deploy every service defined within your environment (build, deploy etc..)"),Object(i.b)("p",null,"A pipeline is composed of an ordered list of ",Object(i.b)("inlineCode",{parentName:"p"},"Deployment Stages"),". Each Stage has an execution order assigned within the pipeline: If a stage A has an execution order lower than stage B then B can be executed only if the execution of stage A is completed."),Object(i.b)("p",null,"Each service of your environment belongs to one (and only one) ",Object(i.b)("inlineCode",{parentName:"p"},"Deployment Stage"),". This allows you to define at which moment of the deployment pipeline a service should be deployed and thus respect any service inter-dependency (e.g. your front-end needs to be started after the back-end, your db needs to be started before your back-end etc..)."),Object(i.b)("p",null,"During the deployment, a service goes through the building and deployment phase (as ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"/docs/using-qovery/deployment/deployment-management/#deploy"}),"explained here"),"). The build and deploy operation of each service within a deployment stage can be executed in parallel (feature WIP)"),Object(i.b)("p",null,"Below you can find a visual example of how the pipeline looks like"),Object(i.b)("p",{align:"center"},Object(i.b)("img",{src:"/img/deployment/example_deployment_pipeline.png",alt:"Deployment Pipeline"})),Object(i.b)("h2",{id:"default-pipeline"},"Default Pipeline"),Object(i.b)("p",null,'By default, the deployment pipeline is constituted of 4 deployment stages with a default service assignment rule:\n0. "DEFAULT DATABASE": any new service of type ',Object(i.b)("inlineCode",{parentName:"p"},"DATABASE"),' will be added to this stage.\n1. "DEFAULT JOB": any new service of type ',Object(i.b)("inlineCode",{parentName:"p"},"JOB"),' will be added to this stage.\n2. "DEFAULT CONTAINER": any new service of type ',Object(i.b)("inlineCode",{parentName:"p"},"CONTAINER"),' will be added to this stage (application deployed from a container image).\n3. "DEFAULT APPLICATION": any new service of type ',Object(i.b)("inlineCode",{parentName:"p"},"APPLICATION")," will be added to this stage (application deployed from a git repository)."),Object(i.b)("p",{align:"center"},Object(i.b)("img",{src:"/img/deployment/default_deployment_pipeline.png",alt:"Default Deployment Pipeline"})),Object(i.b)("p",null,"Once the service is created, the assigned stage can be modified afterwards. See ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"/docs/using-qovery/deployment/deployment-pipeline/#change-stage-for-a-service"}),"this section")," for more information."),Object(i.b)(o.a,{type:"info",mdxType:"Alert"},Object(i.b)("p",null,"This default assignment is maintained as long as you do not delete or rename the default stage. If the default stage is modified or deleted, the service will be automatically added to the latest stage (based on the stage deployment)")),Object(i.b)("h2",{id:"modify-the-pipeline"},"Modify the Pipeline"),Object(i.b)("p",null,"In the following sections we will describe how to modify the Deployment Pipeline. We will use the CLI in our examples since the feature is not yet available on the UI."),Object(i.b)("h3",{id:"add-a-stage"},"Add a stage"),Object(i.b)("p",null,"You can add a new stage by using the following command:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-bash"}),"qovery environment stage create -n <name> -d <description>\n")),Object(i.b)("p",null,"Note that the stage will be added at the end of the pipeline (the highest number)"),Object(i.b)("h3",{id:"modify-a-stage"},"Modify a stage"),Object(i.b)("p",null,"You can modify a stage by using the following command:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-bash"}),"qovery environment stage edit -n <name> -d <description>\n")),Object(i.b)("h3",{id:"delete-a-stage"},"Delete a stage"),Object(i.b)("p",null,"You can modify a stage by using the following command:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-bash"}),"qovery environment stage delete -n <name>\n")),Object(i.b)("h3",{id:"change-stage-for-a-service"},"Change stage for a service"),Object(i.b)("p",null,"You can modify the stage associated to a service by using the following command:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-bash"}),"qovery environment stage move -n <service name> --stage <stage name>\n")))}u.isMDXComponent=!0},446:function(e,t,n){var a;!function(){"use strict";var n={}.hasOwnProperty;function r(){for(var e=[],t=0;t<arguments.length;t++){var a=arguments[t];if(a){var i=typeof a;if("string"===i||"number"===i)e.push(a);else if(Array.isArray(a)&&a.length){var o=r.apply(null,a);o&&e.push(o)}else if("object"===i)for(var l in a)n.call(a,l)&&a[l]&&e.push(l)}}return e.join(" ")}e.exports?(r.default=r,e.exports=r):void 0===(a=function(){return r}.apply(t,[]))||(e.exports=a)}()},447:function(e,t,n){"use strict";n(451);var a=n(0),r=n.n(a),i=n(446),o=n.n(i);n(132);t.a=function(e){var t=e.children,n=e.classNames,a=e.fill,i=e.icon,l=e.type,c=null;switch(l){case"danger":c="alert-triangle";break;case"success":c="check-circle";break;case"warning":c="alert-triangle";break;default:c="info"}return r.a.createElement("div",{className:o()(n,"alert","alert--"+l,{"alert--fill":a,"alert--icon":!1!==i}),role:"alert"},!1!==i&&r.a.createElement("i",{className:o()("feather","icon-"+(i||c))}),t)}},448:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return b}));var a=n(0),r=n.n(a);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=r.a.createContext({}),p=function(e){var t=r.a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l({},t,{},e)),n},d=function(e){var t=p(e.components);return r.a.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},m=Object(a.forwardRef)((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,o=e.parentName,s=c(e,["components","mdxType","originalType","parentName"]),d=p(n),m=a,b=d["".concat(o,".").concat(m)]||d[m]||u[m]||i;return n?r.a.createElement(b,l({ref:t},s,{components:n})):r.a.createElement(b,l({ref:t},s))}));function b(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,o=new Array(i);o[0]=m;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l.mdxType="string"==typeof e?e:a,o[1]=l;for(var s=2;s<i;s++)o[s]=n[s];return r.a.createElement.apply(null,o)}return r.a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},449:function(e,t,n){"use strict";var a=n(1),r=n(0),i=n.n(r),o=n(39),l=n(454),c=n(20),s=n.n(c);t.a=function(e){var t,n=e.to,c=e.href,p=n||c,d=Object(l.a)(p),u=Object(r.useRef)(!1),m=s.a.canUseIntersectionObserver;return Object(r.useEffect)((function(){return!m&&d&&window.docusaurus.prefetch(p),function(){m&&t&&t.disconnect()}}),[p,m,d]),p&&d?i.a.createElement(o.b,Object(a.a)({},e,{onMouseEnter:function(){u.current||(window.docusaurus.preload(p),u.current=!0)},innerRef:function(e){var n,a;m&&e&&d&&(n=e,a=function(){window.docusaurus.prefetch(p)},(t=new window.IntersectionObserver((function(e){e.forEach((function(e){n===e.target&&(e.isIntersecting||e.intersectionRatio>0)&&(t.unobserve(n),t.disconnect(),a())}))}))).observe(n))},to:p})):i.a.createElement("a",Object(a.a)({},e,{href:p}))}},450:function(e,t,n){var a=n(26).f,r=Function.prototype,i=/^\s*function ([^ (]*)/;"name"in r||n(10)&&a(r,"name",{configurable:!0,get:function(){try{return(""+this).match(i)[1]}catch(e){return""}}})},451:function(e,t,n){var a=n(12);a(a.P,"Array",{fill:n(455)}),n(74)("fill")},452:function(e,t,n){"use strict";n(450);var a=n(0),r=n.n(a),i=n(447);t.a=function(e){var t=e.children,n=e.name;return r.a.createElement(i.a,{type:"info",fill:!0,icon:!1,rounded:!0,className:"list--icons list--icons--arrow list--tight list--indent margin-bottom--lg"},r.a.createElement("p",{class:"text--lg margin-bottom--sm",style:{marginTop:"-0.25em"}},"Before you begin, this ",n||"page"," assumes the following:"),t)}},453:function(e,t,n){"use strict";var a=n(0),r=n.n(a),i=n(449),o=n(446),l=n.n(o);n(133);t.a=function(e){var t=e.children,n=e.className,a=e.badge,o=e.leftIcon,c=e.rightIcon,s=e.size,p=e.target,d=e.to,u=l()("jump-to","jump-to--"+s,n),m=r.a.createElement("div",{className:"jump-to--inner"},r.a.createElement("div",{className:"jump-to--inner-2"},o&&r.a.createElement("div",{className:"jump-to--left"},r.a.createElement("i",{className:"feather icon-"+o})),r.a.createElement("div",{className:"jump-to--main"},a?r.a.createElement("span",{className:"badge badge--primary badge--right"},a):"",t),r.a.createElement("div",{className:"jump-to--right"},r.a.createElement("i",{className:"feather icon-"+(c||"chevron-right")+" arrow"}))));return p?r.a.createElement("a",{href:d,target:p,className:u},m):r.a.createElement(i.a,{to:d,className:u},m)}},454:function(e,t,n){"use strict";function a(e){return!1===/^(https?:|\/\/)/.test(e)}n.d(t,"a",(function(){return a}))},455:function(e,t,n){"use strict";var a=n(28),r=n(75),i=n(27);e.exports=function(e){for(var t=a(this),n=i(t.length),o=arguments.length,l=r(o>1?arguments[1]:void 0,n),c=o>2?arguments[2]:void 0,s=void 0===c?n:r(c,n);s>l;)t[l++]=e;return t}}}]);