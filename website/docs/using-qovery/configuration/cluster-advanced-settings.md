---
last_modified_on: "2024-03-27"
title: "Cluster Advanced Settings"
description: "Learn how to set advanced settings on your infrastructure with Qovery"
---
import Jump from '@site/src/components/Jump';
import Alert from '@site/src/components/Alert';
import Assumptions from '@site/src/components/Assumptions';

To further fine-tune your Qovery infrastructure, you can set advanced settings through [the Qovery API endpoint](https://api-doc.qovery.com/#tag/Clusters/operation/editClusterAdvancedSettings).

<Alert type="info">

Cluster advanced settings are not available in the Qovery console yet.

</Alert>

All clusters have access to advanced settings, you can find where they are available in the documentation below with those badges mentioning for which Cloud provider they are available:

#### ![](/img/advanced_settings/aws.svg) ![](/img/advanced_settings/scaleway.svg)

You will also find badges mentioning for which components it will be applied:

#### ![](/img/advanced_settings/database-container.svg) ![](/img/advanced_settings/database-managed.svg)

Below is the list of advanced settings currently available for clusters.

<!--
     THIS FILE IS AUTOGENERATED!

     To make changes please edit the template located at:

     website/docs/using-qovery/configuration/cluster-advanced-settings.md.erb
-->

## Logs

#### aws.cloudwatch.eks_logs_retention_days ![](/img/advanced_settings/aws.svg)

| Type    | Description                                                                                                                                                                    | Default Value |
|---------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------|
| integer | Maximum retention days in Cloudwatch for EKS logs.<br />(possible values: 0, 1, 3, 5, 7, 14, 30, 60, 90, 120, 150, 180, 365, 400, 545, 731, 1827, 2192, 2557, 2922, 3288, 3653)| `90`          |

#### aws.vpc.enable_s3_flow_logs ![](/img/advanced_settings/aws.svg)

| Type    | Description                                                         | Default Value |
|---------|---------------------------------------------------------------------|---------------|
| boolean | Enable flow logs on the cluster VPC and store them in an s3 bucket. | `false`       |

#### aws.vpc.flow_logs_retention_days ![](/img/advanced_settings/aws.svg)

| Type    | Description                                                                        | Default Value |
|---------|------------------------------------------------------------------------------------|---------------|
| integer | Set the number of retention days for flow logs. Unlimited retention with value `0` | `365`         |

#### loki.log_retention_in_week ![](/img/advanced_settings/aws.svg) ![](/img/advanced_settings/scaleway.svg)

| Type    | Description                                                                                 | Default Value  |
|---------|---------------------------------------------------------------------------------------------|----------------|
| integer | Maximum Kubernetes pods (containers/application/jobs/cronjob) retention logs in weeks.      | `12` (84 days) |


## Image registry

#### registry.image_retention_time ![](/img/advanced_settings/aws.svg)

| Type    | Description                                                                                        | Default Value       |
|---------|----------------------------------------------------------------------------------------------------|---------------------|
| integer | Allows you to specify an amount in seconds after which images in the default registry are deleted. | `31536000` (1 year) |

#### registry.mirroring_mode ![](/img/advanced_settings/aws.svg)

| Type    | Description                                                                                                                                                                                   | Default Value       |
|---------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------|
| string  | Allows you to specify the [image mirroring mode][docs.using-qovery.deployment.image-mirroring] to be used for each image deployed on this cluster. (possible values: `Service` or `Cluster`)  | `Service`           |

#### cloud_provider.container_registry.tags ![](/img/advanced_settings/aws.svg) ![](/img/advanced_settings/scaleway.svg)

| Type                | Description                                           | Default Value |
|---------------------|-------------------------------------------------------|---------------|
| Map<String, String> | Add additional tags on the cluster dedicated registry |               |


## Network

### Load balancer

#### load_balancer.size ![](/img/advanced_settings/scaleway.svg)

| Type    | Description                                                                                                                                                                                       | Default Value |
|---------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------|
| string  | Allows you to specify the load balancer size in front of your cluster. Possible values are:<br />- `lb-s`: 200 Mbps<br />- `lb-gp-m`: 500 Mbps<br />- `lb-gp-l`: 1 Gbps<br />- `lb-gp-xl`: 4 Gbps | `lb-s`        |

### Nginx

#### nginx.vcpu.request_in_milli_cpu ![](/img/advanced_settings/aws.svg) ![](/img/advanced_settings/scaleway.svg)

| Type    | Description                                                                                    | Default Value   |
|---------|------------------------------------------------------------------------------------------------|-----------------|
| integer | Vcpu request value in millicores assigned to Nginx pods                                        | `200`           |

#### nginx.vcpu.limit_in_milli_cpu ![](/img/advanced_settings/aws.svg) ![](/img/advanced_settings/scaleway.svg)

| Type    | Description                                                                                    | Default Value   |
|---------|------------------------------------------------------------------------------------------------|-----------------|
| integer | Vcpu limit value in millicores assigned to Nginx pods                                          | `700`           |

#### nginx.memory.request_in_mib ![](/img/advanced_settings/aws.svg) ![](/img/advanced_settings/scaleway.svg)

| Type    | Description                                                                                    | Default Value   |
|---------|------------------------------------------------------------------------------------------------|-----------------|
| integer | Memory limit value in MiB assigned to Nginx pods                                               | `768`           |

#### nginx.memory.limit_in_mib ![](/img/advanced_settings/aws.svg) ![](/img/advanced_settings/scaleway.svg)

| Type    | Description                                                                                    | Default Value   |
|---------|------------------------------------------------------------------------------------------------|-----------------|
| integer | Memory limit value in MiB assigned to Nginx pods                                               | `768`           |

#### nginx.hpa.cpu_utilization_percentage_threshold ![](/img/advanced_settings/aws.svg) ![](/img/advanced_settings/scaleway.svg)

| Type    | Description                                                                                    | Default Value   |
|---------|------------------------------------------------------------------------------------------------|-----------------|
| integer | Hpa (horizontal pod autoscaler) cpu threshold in percentage assigned to Nginx deployment       | `50`            |

#### nginx.hpa.min_number_instances ![](/img/advanced_settings/aws.svg) ![](/img/advanced_settings/scaleway.svg)

| Type    | Description                                                                                    | Default Value   |
|---------|------------------------------------------------------------------------------------------------|-----------------|
| integer | Minimum number of Nginx instances running                                                      | `2`             |

#### nginx.hpa.max_number_instances ![](/img/advanced_settings/aws.svg) ![](/img/advanced_settings/scaleway.svg)

| Type    | Description                                                                                    | Default Value   |
|---------|------------------------------------------------------------------------------------------------|-----------------|
| integer | Maximum number of Nginx instances running                                                      | `25`            |

#### nginx.controller.enable_client_ip ![](/img/advanced_settings/aws.svg) ![](/img/advanced_settings/scaleway.svg) ![](/img/advanced_settings/gcp.svg)

| Type    | Description                                                                                          | Default Value   |
|---------|------------------------------------------------------------------------------------------------------|-----------------|
| bool    | Enables [ngx_http_realip_module](https://nginx.org/en/docs/http/ngx_http_realip_module.html) module. | `false`         |


### Database access

#### database.postgresql.deny_public_access ![](/img/advanced_settings/aws.svg) ![](/img/advanced_settings/database-container.svg) ![](/img/advanced_settings/database-managed.svg)

| Type    | Description                                                                                                                                                                                                        | Default Value |
|---------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------|
| boolean | Deny public access to all PostgreSQL databases. When true, configure the CIDR range you want to allow within the associated `allowed_cidrs` parameter (default is "any IP").<br />⚠️ Public access to managed databases will instantly be removed<br />⚠️ Public access to container databases will be removed only after a database redeployment| `false`       |

#### database.postgresql.allowed_cidrs ![](/img/advanced_settings/aws.svg) ![](/img/advanced_settings/database-managed.svg)

| Type    | Description                                                                                    | Default Value   |
|---------|------------------------------------------------------------------------------------------------|-----------------|
| boolean | List of allowed CIDRS. Valid only when [`database.postgresql.deny_public_access`](#databasepostgresqldeny_public_access) is set to true | `["0.0.0.0/0"]` |

#### database.mysql.deny_public_access ![](/img/advanced_settings/aws.svg) ![](/img/advanced_settings/database-container.svg) ![](/img/advanced_settings/database-managed.svg)

| Type    | Description                                                                                                                                                                                                    | Default Value |
|---------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------|
| boolean | Deny public access to all MySQL databases. When true, configure the CIDR range you want to allow within the associated `allowed_cidrs` parameter (default is "any IP"). <br />⚠️ Public access to managed databases will instantly be removed<br />⚠️ Public access to container databases will be removed only after a database redeployment | `false`       |

#### database.mysql.allowed_cidrs ![](/img/advanced_settings/aws.svg) ![](/img/advanced_settings/database-managed.svg)

| Type    | Description                                                                                    | Default Value   |
|---------|------------------------------------------------------------------------------------------------|-----------------|
| boolean | List of allowed CIDRS. Valid only when [`database.mysql.deny_public_access`](#databasemysqldeny_public_access) is set to true      | `["0.0.0.0/0"]` |

#### database.mongodb.deny_public_access ![](/img/advanced_settings/aws.svg) ![](/img/advanced_settings/database-container.svg) ![](/img/advanced_settings/database-managed.svg)

| Type    | Description                                                                                                                                                                                                     | Default Value |
|---------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------|
| boolean | Deny public access to all MongoDB databases. When true, configure the CIDR range you want to allow within the associated `allowed_cidrs` parameter (default is "any IP"). <br />⚠️ Public access to managed databases will instantly be removed<br />⚠️ Public access to container databases will be removed only after a database redeployment | `false`       |

#### database.mongodb.allowed_cidrs ![](/img/advanced_settings/aws.svg) ![](/img/advanced_settings/database-managed.svg)

| Type    | Description                                                                                    | Default Value   |
|---------|------------------------------------------------------------------------------------------------|-----------------|
| boolean | List of allowed CIDRS. Valid only when [`database.mongodb.deny_public_access`](#databasemongodbdeny_public_access) is set to true    | `["0.0.0.0/0"]` |

#### database.redis.deny_public_access ![](/img/advanced_settings/aws.svg) ![](/img/advanced_settings/database-container.svg) ![](/img/advanced_settings/database-managed.svg)

| Type    | Description                                                                                            | Default Value |
|---------|--------------------------------------------------------------------------------------------------------|---------------|
| boolean | Deny public access to all Redis databases. When true, configure the CIDR range you want to allow within the associated `allowed_cidrs` parameter (default is "anyone").<br />⚠️ Public access to managed databases will instantly be removed<br />⚠️ Public access to container databases will be removed only after a database redeployment | `false`       |

#### database.redis.allowed_cidrs ![](/img/advanced_settings/aws.svg) ![](/img/advanced_settings/database-managed.svg)

| Type    | Description                                                                                    | Default Value   |
|---------|------------------------------------------------------------------------------------------------|-----------------|
| boolean | List of allowed CIDRS. Valid only when [`database.redis.deny_public_access`](#databaseredisdeny_public_access) is set to true      | `["0.0.0.0/0"]` |


## IAM

#### aws.iam.enable_admin_group_sync ![](/img/advanced_settings/aws.svg)

| Type    | Description                                                                 | Default Value |
|---------|-----------------------------------------------------------------------------|---------------|
| boolean  | Enable IAM admin group sync [IAM permissions setup][docs.getting-started.install-qovery.aws.cluster-managed-by-qovery.quickstart#attach-aws-credentials]. <br />⚠️ [`aws.iam.admin_group`](#awsiamadmin_group) should be set. | `true`        |

#### aws.iam.admin_group ![](/img/advanced_settings/aws.svg)

| Type    | Description                                                                 | Default Value |
|---------|-----------------------------------------------------------------------------|---------------|
| string  | Allows you to specify the IAM group name associated with the Qovery user in the AWS console during the [IAM permissions setup][docs.getting-started.install-qovery.aws.cluster-managed-by-qovery.quickstart#attach-aws-credentials] to be able to connect to the Kubernetes cluster | `Admins`        |

#### aws.iam.enable_sso ![](/img/advanced_settings/aws.svg)

| Type    | Description                                                                 | Default Value |
|---------|-----------------------------------------------------------------------------|---------------|
| boolean  | Enable SSO sync allowing IAM users to connect to cluster using SSO. [Setup SSO support for your cluster][guides.tutorial.how-to-activate-sso-to-connect-to-your-eks-cluster]. <br />⚠️ [`aws.iam.sso_role_arn`](#awsiamsso_role_arn) should be set. | `false`        |

#### aws.iam.sso_role_arn ![](/img/advanced_settings/aws.svg)

| Type    | Description                                                                 | Default Value |
|---------|-----------------------------------------------------------------------------|---------------|
| string  | Allows you to specify the SSO role ARN to be used to connect to your cluster. [Setup SSO support for your cluster][guides.tutorial.how-to-activate-sso-to-connect-to-your-eks-cluster]   | `""`        |

## Miscellaneous

#### aws.eks.ec2.metadata_imds ![](/img/advanced_settings/aws.svg)
| Type    | Description                                                                                                                                                                                               | Default Value |
|---------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------|
| string  | Specify the [IMDS](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-instance-metadata.html) version you want to use. Possible values are `required` (IMDS v2 only) and `optional` (IMDS v1 and V2) | `optional`    |

#### aws.eks.encrypt_secrets_kms_key_arn ![](/img/advanced_settings/aws.svg)

<Alert type="warning">

It won't be possible to go back once this feature is activated.

</Alert>

| Type    | Description                                                                                                                                                                                               | Default Value |
|---------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------|
| string  | Allows you to activate KMS encryption of your Kubernetes secrets. Specify the [key ARN](https://docs.aws.amazon.com/kms/latest/developerguide/find-cmk-id-arn.html) of your AWS KMS key.  |               |


[docs.getting-started.install-qovery.aws.cluster-managed-by-qovery.quickstart#attach-aws-credentials]: /docs/getting-started/install-qovery/aws/cluster-managed-by-qovery/quickstart/#attach-aws-credentials
[docs.using-qovery.deployment.image-mirroring]: /docs/using-qovery/deployment/image-mirroring/
[guides.tutorial.how-to-activate-sso-to-connect-to-your-eks-cluster]: /guides/tutorial/how-to-activate-sso-to-connect-to-your-eks-cluster/
