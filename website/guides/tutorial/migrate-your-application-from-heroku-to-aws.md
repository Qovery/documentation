---
last_modified_on: "2023-05-29"
$schema: "/.meta/.schemas/guides.json"
title: Migrate your application from Heroku to AWS
description: Guide on how to migrate all your applications from Heroku to AWS with your databases
author_github: https://github.com/evoxmusic
tags: ["type: tutorial", "cloud_provider: aws"]
hide_pagination: true
---

import Alert from '@site/src/components/Alert';
import TabItem from '@theme/TabItem';

import Tabs from '@theme/Tabs';
import Assumptions from '@site/src/components/Assumptions';

This guide describes how to migrate your application running on Heroku to AWS with Qovery. It covers all required steps you need to take to deploy your application on AWS and transfer your data from Heroku Postgres to the database managed by AWS via Qovery.

> Please contact us via [our forum][urls.qovery_forum] if you experience any problem while migrating from Heroku to AWS with Qovery.

<Assumptions name="guide">

* You are familiar with Heroku basics, have a Heroku account and access to Heroku CLI
* You have [sign in on Qovery][urls.start_qovery]
* You have [set up your AWS account][guides.cloud-provider.guide-amazon-web-services] with Qovery

</Assumptions>

<!--
     THIS FILE IS AUTOGENERATED!

     To make changes please edit the template located at:

     website/guides/tutorial/migrate-your-application-from-heroku-to-aws.md.erb
-->

## Migration Steps

1. [Use Buildpacks or Create your Dockerfile](#1-create-your-dockerfile-or-use-buildpacks)
2. [Create resources on Qovery](#2-create-resources-on-qovery)
3. [Configure Environment Variables and Secrets](#3-configure-your-environment-variables-and-secrets)
4. [Copy data from your Heroku databases to your AWS databases](#4-copy-data-from-your-heroku-databases-to-your-aws-databases)
5. [Deploy your apps](#5-deploy-your-apps-)
6. [FAQ by Heroku users](#faq-by-heroku-users)

## 1. Create your Dockerfile or Use Buildpacks

Qovery supports two ways to build and run your application coming from Heroku:

1. Buildpacks
2. Docker

Both options build a container image that is runnable by a container engine (E.g. Docker). Qovery runs containers on Kubernetes.

Choose the option that better fits you:

<Tabs
centered={true}
className={"rounded"}
defaultValue={"buildpacks"}
placeholder="Use Buildpacks or Create your Dockerfile"
select={false}
size={null}
values={[{"group":"Platforms","label":"Use Buildpacks","value":"buildpacks"},{"group":"Platforms","label":"Create your Dockerfile","value":"dockerfile"}]}>

<TabItem value="dockerfile">

> Are you familiar with Dockerfile? If not, I do recommend reading [this article][guides.tutorial.how-to-write-a-dockerfile].

Here we will create our Dockerfiles to build and run our applications. Qovery will handle the build and the run of your applications, but need to have at least a Dockerfile to do it.

### Choose your Dockerfile template

To get started,

#### Find Dockerfile template

Pick one Dockerfile template according to the programming language or framework you are using for your app:

<Alert type="info">

Your framework or language is missing? Open a thread on [our forum][urls.qovery_forum], and we will provide you one.

</Alert>

<Tabs
centered={false}
className={"square"}
defaultValue={"rails"}
select={false}
size={null}
values={[{"group":"Files","label":"Rails","value":"rails"},{"group":"Files","label":"NodeJS","value":"nodejs"},{"group":"Files","label":"React","value":"react"},{"group":"Files","label":"VueJS","value":"vuejs"},{"group":"Files","label":"NextJS","value":"nextjs"},{"group":"Files","label":"Golang","value":"golang"},{"group":"Files","label":"Flask","value":"flask"},{"group":"Files","label":"Django","value":"django"},{"group":"Files","label":"Laravel","value":"laravel"},{"group":"Files","label":"Symfony","value":"symfony"},{"group":"Files","label":"Spring","value":"spring"},{"group":"Files","label":"Rust","value":"rust"}]}>

<TabItem value="rails">

Here is the Dockerfile for your Rails application listening on the PORT 3000

```shell title="Dockerfile"
# syntax=docker/dockerfile:1
FROM ruby:2.7
RUN apt-get update -qq && apt-get install -y nodejs postgresql-client
WORKDIR /myapp
COPY Gemfile Gemfile
COPY Gemfile.lock Gemfile.lock
RUN bundle install

COPY . .

EXPOSE 3000

# Configure the main process to run when running the image
CMD ["rails", "server", "-b", "0.0.0.0", "-p", "3000"]
```

<details>

<summary>Dockerfile for Sidekiq</summary>

Here is the Dockerfile for your Rails app running as a worker mode with Sidekiq.

<Alert type="info">

There is no listening port since it is consuming resources from a queuing system (E.g. Redis)

</Alert>

```shell title="Dockerfile for Sidekiq"
# syntax=docker/dockerfile:1
FROM ruby:2.7
RUN apt-get update -qq && apt-get install -y nodejs postgresql-client # add mysql client if you need to
WORKDIR /myapp
COPY Gemfile Gemfile
COPY Gemfile.lock Gemfile.lock
RUN bundle install

COPY . .

CMD ["bundle", "exec", "sidekiq"]
```

</details>

</TabItem>

<TabItem value="nodejs">

```shell

TODO

```

</TabItem>

<TabItem value="react">

```shell

TODO

```

</TabItem>

<TabItem value="vuejs">

```shell

TODO

```

</TabItem>

<TabItem value="nextjs">

```shell

TODO

```

</TabItem>

<TabItem value="golang">

```shell

TODO

```

</TabItem>

<TabItem value="flask">

```shell

TODO

```

</TabItem>

<TabItem value="django">

```shell

TODO

```

</TabItem>

<TabItem value="laravel">

```shell

TODO

```

</TabItem>

<TabItem value="symfony">

```shell

TODO

```

</TabItem>

<TabItem value="spring">

```shell

TODO

```

</TabItem>

<TabItem value="rust">

```shell

TODO

```

</TabItem>

</Tabs>

#### Copy template

Copy your Dockerfile at the root of your project. By convention, you can name your file `Dockerfile`. If you already have a Dockerfile, feel free to name it `Dockerfile.qovery`. If you are using multiple Dockerfile for Qovery, feel free to give a name like `Dockerfile-sidekiq.qovery`.

<Alert type="info">

Read [this forum post](https://discuss.qovery.com/t/904) to know how to use the same Dockerfile with different CMD parameters.

</Alert>

For our example of migrating a Rails app and a Rails Sidekiq app, I will have at the root of my project a `Dockerfile.qovery` and a `Dockerfile-sidekiq.qovery`.

### Test your Dockerfile

<Assumptions>

You need to [install Docker](https://docs.docker.com/get-docker/) to test your Dockerfile

</Assumptions>

To test your Dockerfile we will locally our container. You just need to run the following commands:

<Alert type="warning">

Don't forget the `.` (dot) at the end of the `docker build` command.

</Alert>

```shell
docker build -f Dockerfile.qovery .
```

If everything goes well you should get the finale image ID at the end of the output.

```shell
[+] Building 19.0s (16/16) FINISHED
 => [internal] load build definition from Dockerfile                                       0.0s
 => => transferring dockerfile: 37B                                                        0.0s
 => [internal] load .dockerignore                                                          0.0s
 ...
 => [7/7] COPY . .                                                                         0.2s
 => exporting to image                                                                     0.0s
 => exporting layers                                                                       0.4s
 => writing image sha256:a0f90a6ec8bc4036a7b268479a0c0773ca324ba2de11fdef31309650743f4055  0.0s
```

To run your image you can run:

```shell
docker run a0f90a6ec8bc4036a7b268479a0c0773ca324ba2de11fdef31309650743f4055
```

If your app required a database to starts, then it can be normal that it fails to start. Otherwise, if your app is supposed to start and does not, then you will need to fix the issue and rebuild your app with `docker build -f Dockerfile.qovery .`

<Alert type="info">

This step is one of the most complex, but once you successfully build your application with Docker, your app will run anywhere (not only on AWS with Qovery).

</Alert>

Any error while building your container image? 2 solutions:

1. Read the error message and try to understand from where the problem is coming from. You can "Google" the error if it is not related to your code.
2. Open a thread on [our forum][urls.qovery_forum] if you don't find the answer there, we will be happy to assist you.

### Environment variables at the build time

Does your app use some environment variables at the build time? Then you will need to modify your Dockerfile to includes the environment variables. Let's imagine your app uses the environment variable `CONTENT_API_KEY`, then you will need to add the following instructions in your Dockerfile:

```shell title="Dockerfile with environment variables"
...
ARG CONTENT_API_KEY
ENV CONTENT_API_KEY $CONTENT_API_KEY
...
```

The value of the `CONTENT_API_KEY` environment variable will be taken from the specified environment variables in Qovery.

<Alert type="success">

Qovery injects Environment Variables and Secrets at the build and run time of your app.

</Alert>

### Add your Dockerfile to Git

Now, add your new Dockerfile to git with the following commands:

```shell
git add Dockerfile.qovery
git commit -m "Add Qovery Dockerfile"
git push origin
```

### Loop

If you have multiple applications to deploy, create a Dockerfile for each of them.

</TabItem>

<TabItem value="buildpacks">

[Buildpacks](https://buildpacks.io/) automatically detects the language and the framework your application is using. Buildpacks builds and runs your app. Here is the list of [supported languages and frameworks][docs.using-qovery.configuration.application#option-1-buildpacks].

<Alert type="warning">

We do recommend using Docker to keep the full control of what's going on behind the scene. Buildpacks is a great technology but difficult to debug when something goes wrong. You can try deploying your apps on AWS with Qovery with Buildpacks, if you do not succeed, we do recommend switching for Docker.

</Alert>

### Limitations

Here are some limitations due to our Buildpacks implementation:

* Qovery Buildpacks does not support Procfile with multiple commands at the moment.
* Qovery does not support custom Buildpacks.

Those limitations will be solved in the coming months.

</TabItem>

</Tabs>

## 2. Create resources on Qovery

### Application

<Alert type="info">

Are you a new Qovery user? Watch [this tutorial][guides.getting-started.deploy-your-first-application] to learn how to deploy your first app.

</Alert>

<div class="video-container">
  <p align="center">
    <iframe src="https://www.loom.com/embed/9246ae68c68f42debc3d5183d2b4f7f8" width="100%" height="100%" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen>
    </iframe>
  </p>
</div>

Steps:

1. Connect to the [Qovery console][urls.start_qovery].
2. Create your [Organization][docs.using-qovery.configuration.organization] and your [Project][docs.using-qovery.configuration.project].
3. Create an environment with the name `production` (it can be changed after).
4. Create an application and give it a name (you can give the name of your repo if you have no idea)
5. Select your app repository from your GitHub, GitLab or Bitbucket.
6. Select the branch you want to deploy.
7. Select the Build mode for `Buildpacks` or `Dockerfile` according to what you want.
8. Specify the local listening port of your application.
9. Click on "create"

Congrats! Your application is created 🎉

<Alert type="warning">

Your application is created but not deployed yet! You can configure the vCPU, Memory, Environment Variables... before deploying it. If you want to deploy it before finishing the configuration you can click on "Actions" > "Deploy".

</Alert>

If you deploy an app from a mono-repository, we have a must-read guide for you [here][guides.advanced.monorepository].

### Database

<Alert type="info">

Are you a new Qovery user? Watch [this tutorial][guides.getting-started.create-a-database] to learn how to deploy your database.

</Alert>

Here are the steps to deploy your database:

<Assumptions>

* You have created an application before

</Assumptions>

<div class="video-container">
  <p align="center">
    <iframe src="https://www.loom.com/embed/d7e10be0e5964f6799b158dc631bbbd1" width="100%" height="100%" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen>
    </iframe>
  </p>
</div>

Steps:

1. Go to your `production` environment.
2. Add your database by clicking on "Add" > "Database".
3. Select the database (PostgreSQL, MySQL, MongoDB, Redis..) and the version you want to deploy.
4. Select [Managed or Container mode][docs.using-qovery.configuration.database#general] for your database.
5. Select `Public` accessibility (set `Private` if you don't want to restore your data from an existing Heroku database).

Congrats! Your database is created as well 🎉

If you use MongoDB Atlas, or an existing database on AWS that you want to connect to your application deployed by Qovery. Check out [our tutorial about VPC peering][guides.tutorial.aws-vpc-peering-with-qovery] and how to securely connect to your existing database.

## 3. Configure your Environment Variables and Secrets

<Alert type="success">

Qovery supports Doppler integration - it's the easiest way to migrate your Environment Variables and Secrets from Heroku to Qovery. [More info here][docs.using-qovery.integration.secret-manager.doppler].

</Alert>

Qovery makes the difference between an environment variable and a secret. Basically, a Secret is similar to an Environment Variable but the value is encrypted and can't be revealed. Both are injected as environment variables during the build and the run of your applications. [More info here][docs.using-qovery.configuration.environment-variable]

<Alert type="info">

I recommend reading our [Getting Started with Environment Variables][guides.getting-started.managing-environment-variables] guide.

</Alert>

To extract your environment variables from Heroku, we recommend using the [Heroku CLI](https://devcenter.heroku.com/articles/heroku-cli) and exporting all the environment variables and secrets in an .env (dot env) file. Qovery supports the [import of a dot env file][guides.tutorial.import-your-environment-variables-with-the-qovery-cli] via the Qovery web interface and the Qovery CLI.

<Alert type="warning">

If you use Buildpacks for one of your app AND you have indicated a local listening port of your application, you will need to add an environment variable `PORT` with the value of your port to make your application starting properly. Otherwise, Qovery will fail to deploy your app!

</Alert>

[Export your environment variable via the Heroku CLI](https://devcenter.heroku.com/articles/config-vars#view-current-config-var-values) with the command:

```shell
# To install Heroku CLI: https://devcenter.heroku.com/articles/heroku-cli
heroku config

GREETINGS: hello world
STRIPE_API_KEY: xxx-yyy-zzz
IS_PRODUCTION: true
```

Then you can create your environment variables via the web interface (watch the video below)

<div class="video-container">
  <p align="center">
    <iframe src="https://www.loom.com/embed/50899d7fa3d84a418f0db69f54f970d3" width="100%" height="100%" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen>
    </iframe>
  </p>
</div>

Or via the [Qovery CLI][docs.using-qovery.interface.cli]:

```shell title="Import Heroku environment variables with the Qovery CLI"
# auth yourself
qovery auth

# selection the app where you want to import your environment variables
qovery context set

# import your Heroku environment variables
heroku config --app <your_heroku_app_name> --json | \
  qovery env parse --heroku-json > heroku.env && \
  qovery env import heroku.env && \
  rm heroku.env

Qovery: dot env file to import: 'heroku.env'
? Do you want to import Environment Variables or Secrets? Environment Variables
? What environment variables do you want to import?  [Use arrows to move, space to select, <right> to all, <left> to none, type to filter]
  [x]  GREETINGS=hello world
  [ ]  STRIPE_API_KEY=xxx-yyy-zzz
> [x]  IS_PRODUCTION=true

Qovery: ✅ Environment Variables successfully imported!
```

<Alert type="warning">

Import sensitive data (E.g. API keys, credentials...) as `Secret` and not `Environment Variable`.

</Alert>

### Connect your frontend app to your backend app

To connect your frontend app your backend app we will create an [environment variable alias][docs.using-qovery.configuration.environment-variable#alias-environment-variable].

Here is how to create a frontend app:

<div class="video-container">
  <p align="center">
    <iframe src="https://www.loom.com/embed/bafbbda93bd64d04afb3189bf4a1a201" width="100%" height="100%" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen>
    </iframe>
  </p>
</div>

And now how to connect your frontend app with your backend app:

<div class="video-container">
  <p align="center">
    <iframe src="https://www.loom.com/embed/f820925f2175465f9271b97ef414bb42" width="100%" height="100%" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen>
    </iframe>
  </p>
</div>

You can also take a look at [this forum reply](https://discuss.qovery.com/t/918) to learn how to do it.


### Connect your backend app to your database

Same as connecting your frontend app to your backend app, you can create an environment variable alias `DATABASE_URL` for the *built-in* secret finishing with `_DATABASE_URL_INTERNAL`.

<Alert type="warning">

Create an alias on `_DATABASE_URL_INTERNAL` and not `_DATABASE_URL`

</Alert>

<div class="video-container">
  <p align="center">
    <iframe src="https://www.loom.com/embed/59f8368eb3c14796a807c7e39e9c0ab0" width="100%" height="100%" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen>
    </iframe>
  </p>
</div>

## 4. Copy data from your Heroku databases to your AWS databases

*Coming soon with [Replibyte](https://www.replibyte.com)*

## 5. Deploy your apps!

We are finally ready to deploy my applications on AWS!

<div class="video-container">
  <p align="center">
    <iframe src="https://www.loom.com/embed/0589d2f2aa4149edb605dc23f4efd23d" width="100%" height="100%" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen>
    </iframe>
  </p>
</div>

Watch the final result 😎

<div class="video-container">
  <p align="center">
    <iframe src="https://www.loom.com/embed/da31c21f9c104eae9270e4c4db59055e" width="100%" height="100%" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen>
    </iframe>
  </p>
</div>

## FAQ by Heroku users

### How to create a custom domain?

Check out the documentation on [how to configure your custom domain][guides.getting-started.setting-custom-domain].

### How to monitor my apps?

We do recommend using [Datadog](https://www.datadoghq.com) or any other monitoring products for monitoring your apps deployed by Qovery. Check out [our tutorial on how to install Datadog][guides.tutorial.kubernetes-observability-and-monitoring-with-datadog].

### Do you have Heroku "Review App" equivalent?

Yes, it's what we call [Preview Environment][docs.using-qovery.configuration.environment#preview-environment]

### How to rollback?

Check out the [app rollback documentation][docs.using-qovery.deployment.deployment-actions#deploy-other-version]

### How auto-scaling works?

Check out the [app auto-scaling documentation][docs.using-qovery.configuration.application#auto-scaling]

### How to manage database migration?

Check out [our forum reply](https://discuss.qovery.com/t/951)

### Is it possible to get a shell / connect to my app?

Yes, with the Qovery CLI and the command `qovery shell`. [Check out the documentation][docs.using-qovery.interface.cli#shell].

### Can I use Terraform and Infrastructure as Code?

Absolutely, we have a [Qovery Terraform provider][docs.using-qovery.integration.terraform] available.

### How can I connect my app to MongoDB Atlas?

If you use MongoDB Atlas check out [our tutorial about VPC peering][guides.tutorial.aws-vpc-peering-with-qovery] and how to securely connect to your existing MongoDB Atlas database.

### How can I connect my app to an AWS service not managed by Qovery?

If you want to connect your app to an AWS service not managed by Qovery, check out [our tutorial about VPC peering][guides.tutorial.aws-vpc-peering-with-qovery] and how to securely connect to this AWS service.

----

If you have a common question about Qovery, we have a more general [FAQ section][docs.useful-resources.faq] available.

## Wrapping up

Congrats! You have migrated from Heroku to AWS. Feel free to check out our [forum][urls.qovery_forum] and open a thread if you have any question.


[docs.useful-resources.faq]: /docs/useful-resources/faq/
[docs.using-qovery.configuration.application#auto-scaling]: /docs/using-qovery/configuration/application/#auto-scaling
[docs.using-qovery.configuration.application#option-1-buildpacks]: /docs/using-qovery/configuration/application/#option-1-buildpacks
[docs.using-qovery.configuration.database#general]: /docs/using-qovery/configuration/database/#general
[docs.using-qovery.configuration.environment#preview-environment]: /docs/using-qovery/configuration/environment/#preview-environment
[docs.using-qovery.configuration.environment-variable#alias-environment-variable]: /docs/using-qovery/configuration/environment-variable/#alias-environment-variable
[docs.using-qovery.configuration.environment-variable]: /docs/using-qovery/configuration/environment-variable/
[docs.using-qovery.configuration.organization]: /docs/using-qovery/configuration/organization/
[docs.using-qovery.configuration.project]: /docs/using-qovery/configuration/project/
[docs.using-qovery.deployment.deployment-actions#deploy-other-version]: /docs/using-qovery/deployment/deployment-actions/#deploy-other-version
[docs.using-qovery.integration.secret-manager.doppler]: /docs/using-qovery/integration/secret-manager/doppler/
[docs.using-qovery.integration.terraform]: /docs/using-qovery/integration/terraform/
[docs.using-qovery.interface.cli#shell]: /docs/using-qovery/interface/cli/#shell
[docs.using-qovery.interface.cli]: /docs/using-qovery/interface/cli/
[guides.advanced.monorepository]: /guides/advanced/monorepository/
[guides.cloud-provider.guide-amazon-web-services]: /guides/cloud-provider/guide-amazon-web-services/
[guides.getting-started.create-a-database]: /guides/getting-started/create-a-database/
[guides.getting-started.deploy-your-first-application]: /guides/getting-started/deploy-your-first-application/
[guides.getting-started.managing-environment-variables]: /guides/getting-started/managing-environment-variables/
[guides.getting-started.setting-custom-domain]: /guides/getting-started/setting-custom-domain/
[guides.tutorial.aws-vpc-peering-with-qovery]: /guides/tutorial/aws-vpc-peering-with-qovery/
[guides.tutorial.how-to-write-a-dockerfile]: /guides/tutorial/how-to-write-a-dockerfile/
[guides.tutorial.import-your-environment-variables-with-the-qovery-cli]: /guides/tutorial/import-your-environment-variables-with-the-qovery-cli/
[guides.tutorial.kubernetes-observability-and-monitoring-with-datadog]: /guides/tutorial/kubernetes-observability-and-monitoring-with-datadog/
[urls.qovery_forum]: https://discuss.qovery.com/
[urls.start_qovery]: https://start.qovery.com
